<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Lumpsum Calculator - CFS</title>
    <link rel="shortcut icon" href="../assets/Logo.svg" type="image/x-icon" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Add html2canvas library for screenshots -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Poppins", sans-serif;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }
      /* Custom Slider Styles */
      .custom-slider {
        -webkit-appearance: none;
        appearance: none;
        height: 6px;
        border-radius: 3px;
        background: #e5e7eb; /* Light grey track - NOT FILLED */
        outline: none;
        transition: all 0.3s ease;
      }
      .custom-slider::-webkit-slider-thumb {
        -webkit-appearance: none;
        appearance: none;
        width: 20px;
        height: 20px;
        border-radius: 50%;
        background: #fcaf1b; /* Primary color for thumb */
        cursor: grab;
        border: none;
        box-shadow: 0 2px 6px rgba(252, 175, 27, 0.4); /* Shadow matching primary */
        transition: all 0.2s ease;
      }
      .custom-slider::-webkit-slider-thumb:active {
        cursor: grabbing;
      }
      .custom-slider::-moz-range-thumb {
        width: 20px;
        height: 20px;
        border-radius: 50%;
        background: #fcaf1b; /* Primary color for thumb */
        cursor: grab;
        border: none;
        box-shadow: 0 2px 6px rgba(252, 175, 27, 0.4); /* Shadow matching primary */
        transition: all 0.2s ease;
      }
      /* Toggle Switch */
      .toggle-switch {
        position: relative;
        display: inline-block;
        width: 48px;
        height: 28px;
      }
      .toggle-switch input {
        opacity: 0;
        width: 0;
        height: 0;
      }
      .toggle-slider {
        position: absolute;
        cursor: pointer;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: #e5e7eb;
        transition: all 0.3s ease;
        border-radius: 28px;
      }
      .toggle-slider:before {
        position: absolute;
        content: "";
        height: 20px;
        width: 20px;
        left: 4px;
        bottom: 4px;
        background-color: white;
        transition: all 0.3s ease;
        border-radius: 50%;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
      }
      input:checked + .toggle-slider {
        background-color: #161f48; /* Secondary color for active toggle */
      }
      input:checked + .toggle-slider:before {
        transform: translateX(20px);
      }
      /* Input field styling */
      .input-value-box {
        background-color: #f3f4f6; /* Light grey background */
        border-radius: 8px;
        padding: 8px 12px;
        font-weight: 600;
        color: #1f2937;
        display: flex;
        align-items: center;
        gap: 4px;
        transition: all 0.2s ease;
      }
      .input-value-box:focus-within {
        box-shadow: 0 0 0 2px rgba(22, 31, 72, 0.2); /* Shadow matching secondary */
      }
      .input-value-box input {
        background: none;
        border: none;
        outline: none;
        width: 100%;
        font-weight: 600;
        color: #1f2937;
        text-align: right; /* Align text to right */
        padding: 0; /* Remove default padding */
      }
      /* Result item styling */
      .result-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 12px 0;
        border-bottom: 1px solid #f3f4f6;
      }
      .result-item:last-child {
        border-bottom: none;
      }
      .result-item .label {
        font-weight: 500;
        color: #4b5563;
      }
      .result-item .value {
        font-weight: 600;
        color: #1f2937;
      }
      /* Chart legend dots */
      .chart-legend-dot {
        width: 10px;
        height: 10px;
        border-radius: 50%;
        display: inline-block;
        margin-right: 8px;
      }
    </style>
  </head>
  <body
    class="bg-[#fcaf1b]/10 flex flex-col items-center justify-center min-h-screen"
  >
    <section
      class="max-w-6xl w-full flex justify-center items-center text-center flex-col p-4 mt-16"
    >
      <div
        class="max-w-6xl w-full flex justify-center items-center text-center flex-col"
      >
        <div class="text-center mb-8 mt-8">
          <h1 class="text-2xl lg:text-4xl font-semibold text-black mb-3">
            Lumpsum Investment
            <span class="text-[#fcaf1b]">Calculator</span>
          </h1>
          <p class="text-gray-500 text-base lg:text-lg">
            Estimate your returns instantly. Save or share your results with
            ease.
          </p>
        </div>
        <div
          id="calculatorContainer"
          class="max-w-6xl w-full bg-white p-4 rounded-3xl border border-gray-300 overflow-hidden"
        >
          <!-- Mode Toggle (Lumpsum vs Target) - Lumpsum is now default active -->
          <div class="flex justify-center p-2 mt-1 border-b border-gray-100">
            <div class="inline-flex bg-gray-100 rounded-lg p-1">
              <button
                id="lumpsumModeBtn"
                class="px-5 py-2 text-base font-medium rounded-md transition-colors duration-200 bg-white text-gray-800 shadow-base cursor-pointer"
              >
                Lumpsum Investment
              </button>
              <button
                id="targetModeBtn"
                class="px-5 py-2 text-base font-medium rounded-md transition-colors duration-200 text-gray-600 hover:bg-gray-200 cursor-pointer"
              >
                Target Amount
              </button>
            </div>
          </div>
          <div class="grid lg:grid-cols-2 gap-8 p-8">
            <!-- Left Side - Input Controls -->
            <div class="space-y-8">
              <!-- Lumpsum Investment / Target Amount -->
              <div>
                <div class="flex items-center justify-between mb-3">
                  <label
                    id="amountLabel"
                    class="text-lg font-medium text-gray-700"
                    >Lumpsum Investment</label
                  >
                  <div class="input-value-box w-40">
                    <span class="text-gray-500">₹</span>
                    <input
                      type="text"
                      id="amountInput"
                      value="10,00,000"
                      min="10000"
                      max="100000000"
                      step="1000"
                    />
                  </div>
                </div>
                <input
                  type="range"
                  id="amountSlider"
                  min="10000"
                  max="100000000"
                  value="1000000"
                  step="1000"
                  class="custom-slider w-full mt-4"
                />
                <div class="flex justify-between text-xs text-gray-500 mt-2">
                  <span>₹10K</span>
                  <span>₹10Cr</span>
                </div>
              </div>
              <!-- Expected Return Rate -->
              <div>
                <div class="flex items-center justify-between mb-3">
                  <label class="text-lg font-medium text-gray-700 text-start"
                    >Expected return rate (p.a)</label
                  >
                  <div class="input-value-box w-32">
                    <input
                      type="number"
                      id="returnInput"
                      value="12"
                      min="1"
                      max="30"
                      step="0.1"
                    />
                    <span class="text-gray-500">%</span>
                  </div>
                </div>
                <input
                  type="range"
                  id="returnSlider"
                  min="1"
                  max="30"
                  value="12"
                  step="0.1"
                  class="custom-slider w-full mt-4"
                />
                <div class="flex justify-between text-xs text-gray-500 mt-2">
                  <span>1%</span>
                  <span>30%</span>
                </div>
              </div>
              <!-- Time Period -->
              <div>
                <div class="flex items-center justify-between mb-3">
                  <label class="text-lg font-medium text-gray-700"
                    >Time period</label
                  >
                  <div class="input-value-box w-32">
                    <input
                      type="number"
                      id="timeInput"
                      value="10"
                      min="1"
                      max="50"
                      step="1"
                    />
                    <span class="text-gray-500">Y</span>
                  </div>
                </div>
                <input
                  type="range"
                  id="timeSlider"
                  min="1"
                  max="50"
                  value="10"
                  step="1"
                  class="custom-slider w-full mt-4"
                />
                <div class="flex justify-between text-xs text-gray-500 mt-2">
                  <span>1Y</span>
                  <span>50Y</span>
                </div>
              </div>
              <!-- Adjust for Inflation Toggle (Only visible in Target Mode) -->
              <div id="inflationToggleSection" class="hidden">
                <div class="flex items-center justify-between mb-3">
                  <label class="text-lg font-medium text-gray-700"
                    >Adjust for inflation</label
                  >
                  <label class="toggle-switch">
                    <input type="checkbox" id="inflationToggle" />
                    <span class="toggle-slider"></span>
                  </label>
                </div>
              </div>
              <!-- Expected Inflation (Visible when toggle is on and in Target Mode) -->
              <div
                id="inflationControls"
                class="hidden opacity-50 pointer-events-none transition-all duration-300"
              >
                <div class="flex items-center justify-between mb-3">
                  <label class="text-lg font-medium text-gray-700"
                    >Expected Inflation (p.a)</label
                  >
                  <div class="input-value-box w-32">
                    <input
                      type="number"
                      id="inflationInput"
                      value="5"
                      min="0"
                      max="15"
                      step="0.1"
                    />
                    <span class="text-gray-500">%</span>
                  </div>
                </div>
                <input
                  type="range"
                  id="inflationSlider"
                  min="0"
                  max="15"
                  value="5"
                  step="0.1"
                  class="custom-slider w-full mt-4"
                />
                <div class="flex justify-between text-xs text-gray-500 mt-2">
                  <span>0%</span>
                  <span>15%</span>
                </div>
              </div>
            </div>
            <!-- Right Side - Results and Chart -->
            <div class="space-y-8">
              <!-- Chart -->
              <div class="flex justify-center items-center h-64">
                <div class="relative w-64 h-64">
                  <canvas id="lumpsumChart"></canvas>
                  <div
                    class="absolute inset-0 flex items-center justify-center"
                  >
                    <div class="text-center">
                      <div class="text-sm text-gray-500">Total Value</div>
                      <div
                        id="totalValueCenter"
                        class="text-xl font-semibold text-gray-800"
                      >
                        ₹31.04 L
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <!-- Chart Legend -->
              <div class="flex justify-center space-x-6 text-sm text-gray-600">
                <div>
                  <span class="chart-legend-dot bg-gray-300"></span>
                  <span id="legendLabel1">Invested amount</span>
                </div>
                <div>
                  <span
                    class="chart-legend-dot"
                    style="background-color: #161f48"
                  ></span>
                  <span id="legendLabel2">Est. returns</span>
                </div>
              </div>
              <!-- Results -->
              <div class="space-y-2">
                <!-- Target amount (inflation adjusted) (for target mode) - MOVED TO TOP -->
                <div
                  id="inflationAdjustedTargetItem"
                  class="hidden result-item"
                >
                  <span class="label" style="color: #161f48"
                    >Target amount (inflation adjusted)</span
                  >
                  <span
                    id="inflationAdjustedTargetValue"
                    class="value"
                    style="color: #161f48; font-size: 1.25rem"
                    >₹0.00 L</span
                  >
                </div>

                <!-- Est. Lump sum amount invested (for target mode) -->
                <div id="requiredLumpsumItem" class="hidden result-item">
                  <span class="label" style="color: #161f48"
                    >Est. Lump sum amount invested</span
                  >
                  <span
                    id="requiredLumpsum"
                    class="value"
                    style="color: #161f48; font-size: 1rem"
                    >₹0.00 L</span
                  >
                </div>

                <!-- Original Invested amount (label changes based on mode) -->
                <div class="result-item" id="investedAmountItem">
                  <span class="label" id="totalInvestmentLabel"
                    >Invested amount</span
                  >
                  <span id="totalInvestment" class="value">₹10.00 L</span>
                </div>

                <!-- Original Est. returns (label changes based on mode) -->
                <div class="result-item" id="expectedGrowthItem">
                  <span class="label" id="expectedGrowthLabel"
                    >Est. returns</span
                  >
                  <span id="expectedGrowth" class="value">₹21.04 L</span>
                </div>

                <!-- Original Total value -->
                <div class="result-item" id="totalValueItem">
                  <span class="label">Total value</span>
                  <span id="totalValue" class="value text-lg font-bold"
                    >₹31.04 L</span
                  >
                </div>

                <!-- Growth Percentage (hidden in target mode) -->
                <div id="growthPercentageItem" class="result-item">
                  <span class="label">Growth Percentage</span>
                  <span
                    id="growthPercentage"
                    class="value text-lg font-bold bg-[#161f48]/10 rounded-full px-4 py-1"
                    >210.4%</span
                  >
                </div>
              </div>
            </div>
          </div>
          <!-- Action Buttons -->
          <div class="p-8 border-t border-gray-200">
            <div class="flex flex-wrap gap-4 justify-center">
              <button
                id="emailPlanBtn"
                class="flex items-center gap-2 text-sm lg:text-base px-4 lg:px-6 py-2 lg:py-3 rounded-full text-black border border-gray-300 hover:bg-gray-100 transition-colors cursor-pointer"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  x="0px"
                  y="0px"
                  width="24"
                  height="24"
                  viewBox="0 0 48 48"
                >
                  <path
                    fill="#4caf50"
                    d="M45,16.2l-5,2.75l-5,4.75L35,40h7c1.657,0,3-1.343,3-3V16.2z"
                  ></path>
                  <path
                    fill="#1e88e5"
                    d="M3,16.2l3.614,1.71L13,23.7V40H6c-1.657,0-3-1.343-3-3V16.2z"
                  ></path>
                  <polygon
                    fill="#e53935"
                    points="35,11.2 24,19.45 13,11.2 12,17 13,23.7 24,31.95 35,23.7 36,17"
                  ></polygon>
                  <path
                    fill="#c62828"
                    d="M3,12.298V16.2l10,7.5V11.2L9.876,8.859C9.132,8.301,8.228,8,7.298,8h0C4.924,8,3,9.924,3,12.298z"
                  ></path>
                  <path
                    fill="#fbc02d"
                    d="M45,12.298V16.2l-10,7.5V11.2l3.124-2.341C38.868,8.301,39.772,8,40.702,8h0 C43.076,8,45,9.924,45,12.298z"
                  ></path>
                </svg>
                Email
              </button>
              <button
                id="whatsappBtn"
                class="flex items-center gap-2 text-base px-6 py-3 rounded-full text-black border border-gray-300 hover:bg-gray-100 transition-colors cursor-pointer"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  x="0px"
                  y="0px"
                  width="24"
                  height="24"
                  viewBox="0 0 48 48"
                >
                  <path
                    fill="#fff"
                    d="M4.9,43.3l2.7-9.8C5.9,30.6,5,27.3,5,24C5,13.5,13.5,5,24,5c5.1,0,9.8,2,13.4,5.6C41,14.2,43,18.9,43,24 c0,10.5-8.5,19-19,19c0,0,0,0,0,0h0c-3.2,0-6.3-0.8-9.1-2.3L4.9,43.3z"
                  ></path>
                  <path
                    fill="#fff"
                    d="M4.9,43.8c-0.1,0-0.3-0.1-0.4-0.1c-0.1-0.1-0.2-0.3-0.1-0.5L7,33.5c-1.6-2.9-2.5-6.2-2.5-9.6 C4.5,13.2,13.3,4.5,24,4.5c5.2,0,10.1,2,13.8,5.7c3.7,3.7,5.7,8.6,5.7,13.8c0,10.7-8.7,19.5-19.5,19.5c-3.2,0-6.3-0.8-9.1-2.3 L5,43.8C5,43.8,4.9,43.8,4.9,43.8z"
                  ></path>
                  <path
                    fill="#cfd8dc"
                    d="M24,5c5.1,0,9.8,2,13.4,5.6C41,14.2,43,18.9,43,24c0,10.5-8.5,19-19,19h0c-3.2,0-6.3-0.8-9.1-2.3L4.9,43.3 l2.7-9.8C5.9,30.6,5,27.3,5,24C5,13.5,13.5,5,24,5 M24,43L24,43L24,43 M24,43L24,43L24,43 M24,4L24,4C13,4,4,13,4,24 c0,3.4,0.8,6.7,2.5,9.6L3.9,43c-0.1,0.3,0,0.7,0.3,1c0.2,0.2,0.4,0.3,0.7,0.3c0.1,0,0.2,0,0.3,0l9.7-2.5c2.8,1.5,6,2.2,9.2,2.2 c11,0,20-9,20-20c0-5.3-2.1-10.4-5.8-14.1C34.4,6.1,29.4,4,24,4L24,4z"
                  ></path>
                  <path
                    fill="#40c351"
                    d="M35.2,12.8c-3-3-6.9-4.6-11.2-4.6C15.3,8.2,8.2,15.3,8.2,24c0,3,0.8,5.9,2.4,8.4L11,33l-1.6,5.8l6-1.6l0.6,0.3 c2.4,1.4,5.2,2.2,8,2.2h0c8.7,0,15.8-7.1,15.8-15.8C39.8,19.8,38.2,15.8,35.2,12.8z"
                  ></path>
                  <path
                    fill="#fff"
                    fill-rule="evenodd"
                    d="M19.3,16c-0.4-0.8-0.7-0.8-1.1-0.8c-0.3,0-0.6,0-0.9,0s-0.8,0.1-1.3,0.6c-0.4,0.5-1.7,1.6-1.7,4 s1.7,4.6,1.9,4.9s3.3,5.3,8.1,7.2c4,1.6,4.8,1.3,5.7,1.2c0.9-0.1,2.8-1.1,3.2-2.3c0.4-1.1,0.4-2.1,0.3-2.3c-0.1-0.2-0.4-0.3-0.9-0.6 s-2.8-1.4-3.2-1.5c-0.4-0.2-0.8-0.2-1.1,0.2c-0.3,0.5-1.2,1.5-1.5,1.9c-0.3,0.3-0.6,0.4-1,0.1c-0.5-0.2-2-0.7-3.8-2.4 c-1.4-1.3-2.4-2.8-2.6-3.3c-0.3-0.5,0-0.7,0.2-1c0.2-0.2,0.5-0.6,0.7-0.8c0.2-0.3,0.3-0.5,0.5-0.8c0.2-0.3,0.1-0.6,0-0.8 C20.6,19.3,19.7,17,19.3,16z"
                    clip-rule="evenodd"
                  ></path>
                </svg>
                WhatsApp
              </button>
              <button
                id="downloadImageBtn"
                class="flex items-center gap-2 text-base px-6 py-3 rounded-full text-black border border-gray-300 hover:bg-gray-100 transition-colors cursor-pointer"
              >
                <i data-lucide="download" class="w-5 h-5"></i>
                Download Image
              </button>
              <a
                href="../index.html#consultation"
                class="inline-flex items-center bg-[#fcaf1b] text-white pl-5 pr-3 py-3 rounded-full text-base gap-3 group transition hover:bg-[#161f48] shadow-md"
              >
                Start Investing
                <span
                  class="bg-white text-black rounded-full p-1.5 flex items-center justify-center transition-transform group-hover:translate-x-1"
                >
                  <i data-lucide="arrow-right" class="w-4 h-4"></i>
                </span>
              </a>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- =================================================================== -->
    <!-- NAVIGATION HEADER - Fixed position with dropdown menus -->
    <!-- =================================================================== -->
    <header
      class="bg-white border-b border-gray-300 shadow-sm fixed w-full top-0 z-50"
    >
      <div
        class="mx-6 lg:mx-12 px-2 py-3 flex items-center justify-between relative"
      >
        <!-- Company Logo and Trust Badge -->
        <div class="flex items-center gap-2">
          <img
            src="../assets/Logo.svg"
            class="h-12 w-auto"
            alt="Chimulkar Financial Services Logo"
          />
          <img
            src="../assets/Trust-batch.png"
            class="h-12 w-auto"
            alt="Trust Certification Badge"
          />
        </div>

        <!-- Desktop Navigation Menu - Hidden on mobile -->
        <nav class="hidden md:flex gap-8 text-[16px] font-medium items-center">
          <!-- Simple navigation link -->
          <a href="#about-us" class="hover:text-[#fcaf1b] transition"
            >About Us</a
          >

          <!-- Services Dropdown Menu -->
          <div class="relative group z-50">
            <button
              class="flex items-center gap-1 hover:text-[#fcaf1b] transition cursor-pointer"
            >
              Services <i data-lucide="chevron-down" class="w-4 h-4"></i>
            </button>
            <!-- Dropdown content - appears on hover -->
            <div
              class="absolute top-full left-0 mt-2 bg-white rounded-lg min-w-[14rem] text-sm opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 pointer-events-auto border border-gray-300 shadow-md"
            >
              <a
                href="#service-1"
                class="flex items-center gap-3 px-4 py-2 hover:bg-[#fcaf1b] hover:text-white rounded-t-lg cursor-pointer"
              >
                <i data-lucide="layers" class="w-4 h-4"></i> Mutual Funds
              </a>
              <a
                href="#service-2"
                class="flex items-center gap-3 px-4 py-2 hover:bg-[#fcaf1b] hover:text-white cursor-pointer"
              >
                <i data-lucide="calendar-check" class="w-4 h-4"></i> Retirement
                Planning
              </a>
              <a
                href="#service-3"
                class="flex items-center gap-3 px-4 py-2 hover:bg-[#fcaf1b] hover:text-white cursor-pointer"
              >
                <i data-lucide="file-text" class="w-4 h-4"></i> Tax Planning
              </a>
              <a
                href="#service-4"
                class="flex items-center gap-3 px-4 py-2 hover:bg-[#fcaf1b] hover:text-white cursor-pointer"
              >
                <i data-lucide="shield-check" class="w-4 h-4"></i> Insurance
                Planning
              </a>
              <a
                href="#service-5"
                class="flex items-center gap-3 px-4 py-2 hover:bg-[#fcaf1b] hover:text-white rounded-b-lg cursor-pointer"
              >
                <i data-lucide="archive" class="w-4 h-4"></i> Legacy Planning
              </a>
            </div>
          </div>

          <!-- Calculator Tools Dropdown -->
          <div class="relative group z-50">
            <button
              class="flex items-center gap-1 hover:text-[#fcaf1b] transition cursor-pointer"
            >
              Calculator <i data-lucide="chevron-down" class="w-4 h-4"></i>
            </button>
            <div
              class="absolute top-full left-0 mt-2 bg-white rounded-lg min-w-[14rem] text-sm opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 pointer-events-auto border border-gray-300 shadow-md"
            >
              <a
                href="../calculators/sip-calculator.html"
                class="flex items-center gap-3 px-4 py-2 hover:bg-[#fcaf1b] hover:text-white rounded-t-lg cursor-pointer"
              >
                <i data-lucide="calculator" class="w-4 h-4"></i> SIP Calculator
              </a>
              <a
                href="../calculators/lump-sump-calculator.html"
                class="flex items-center gap-3 px-4 py-2 hover:bg-[#fcaf1b] hover:text-white cursor-pointer"
              >
                <i data-lucide="percent" class="w-4 h-4"></i> Lump Sum
              </a>
              <a
                href="../calculators/swp-calculator.html"
                class="flex items-center gap-3 px-4 py-2 hover:bg-[#fcaf1b] hover:text-white rounded-b-lg cursor-pointer"
              >
                <i data-lucide="activity" class="w-4 h-4"></i> SPW Calculator
              </a>
              <a
                href="../calculators/inflation-calculator.html"
                class="flex items-center gap-3 px-4 py-2 hover:bg-[#fcaf1b] hover:text-white rounded-b-lg cursor-pointer"
              >
                <i data-lucide="trending-up" class="w-4 h-4"></i> Inflation
                Calculator
              </a>
            </div>
          </div>

          <!-- Financial Literacy Dropdown -->
          <div class="relative group z-50">
            <button
              class="flex items-center gap-1 hover:text-[#fcaf1b] transition cursor-pointer"
            >
              Financial Literacy
              <i data-lucide="chevron-down" class="w-4 h-4"></i>
            </button>
            <div
              class="absolute top-full left-0 mt-2 bg-white rounded-lg min-w-[14rem] text-sm opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 pointer-events-auto border border-gray-300 shadow-md"
            >
              <a
                href="#lit-1"
                class="flex items-center gap-3 px-4 py-2 hover:bg-[#fcaf1b] hover:text-white rounded-t-lg cursor-pointer"
              >
                <i data-lucide="book-open" class="w-4 h-4"></i> Basics
              </a>
              <a
                href="#lit-2"
                class="flex items-center gap-3 px-4 py-2 hover:bg-[#fcaf1b] hover:text-white cursor-pointer"
              >
                <i data-lucide="lightbulb" class="w-4 h-4"></i> Tips & Guides
              </a>
              <a
                href="#lit-3"
                class="flex items-center gap-3 px-4 py-2 hover:bg-[#fcaf1b] hover:text-white rounded-b-lg cursor-pointer"
              >
                <i data-lucide="play-circle" class="w-4 h-4"></i> Video Lessons
              </a>
            </div>
          </div>

          <!-- Additional navigation links -->
          <a href="#nri-corner" class="hover:text-[#fcaf1b] transition"
            >NRI Corner</a
          >
          <a href="#contact-us" class="hover:text-[#fcaf1b] transition"
            >Contact Us</a
          >
        </nav>

        <!-- Call-to-Action Button - Desktop only -->
        <a
          href="#"
          class="hidden md:inline-flex items-center bg-[#fcaf1b] text-white pl-5 pr-3 py-2 rounded-full text-sm gap-3 group transition hover:bg-[#161f48] ]"
        >
          Get Free Assessment
          <span
            class="bg-white text-black rounded-full p-1.5 flex items-center justify-center transition-transform group-hover:translate-x-1"
          >
            <i data-lucide="arrow-right" class="w-4 h-4"></i>
          </span>
        </a>

        <!-- Mobile Menu Toggle Button -->
        <button
          id="menuToggle"
          class="md:hidden p-2 bg-gray-50 border border-gray-300 rounded-full hover:bg-gray-100 hover:cursor-pointer"
        >
          <i data-lucide="align-right" class="w-6 h-6 text-[#161f48]"></i>
        </button>
      </div>
    </header>

    <!-- Announcement Bar - Positioned below navbar -->
    <!-- <div
      class="fixed top-[72px] w-full h-12 bg-[#161f48] z-40 flex items-center justify-center px-4 text-sm"
    >
      <a href="#" class="flex items-center text-[#fcaf1b] hover:underline">
        Get a no cost, no commitment assessment
        <i data-lucide="arrow-right" class="w-5 h-5 ml-2"></i>
      </a>
      <a href="#" class="hidden lg:inline-flex items-center text-white mr-2">
        <span class="text-[#fcaf1b] mx-2">|</span> Celebrating 40 Years of Trust
      </a>
    </div> -->

    <!-- Mobile Menu Backdrop - Dark overlay when mobile menu is open -->
    <div
      id="backdrop"
      class="fixed inset-0 bg-black/20 backdrop-blur-sm z-40 hidden opacity-0 transition"
    ></div>

    <!-- =================================================================== -->
    <!-- MOBILE NAVIGATION MENU - Slide-in from right -->
    <!-- =================================================================== -->
    <div
      id="mobileMenu"
      class="md:hidden fixed top-0 right-0 h-full max-w-xs bg-white shadow-xl transform translate-x-full transition duration-300 z-50 flex flex-col justify-between overflow-y-auto"
    >
      <!-- Mobile menu content -->
      <div class="p-6 flex flex-col gap-4">
        <!-- Mobile menu header with logo and close button -->
        <div class="flex justify-between items-center mb-4">
          <img src="../assets/Logo.svg" class="h-10" alt="Logo" />
          <button
            id="closeMenu"
            class="p-2 bg-gray-50 text-[#161f48] border border-gray-300 rounded-full hover:bg-gray-100 hover:cursor-pointer"
          >
            <i data-lucide="x" class="w-6 h-6"></i>
          </button>
        </div>

        <!-- Mobile navigation links -->
        <a
          href="#about-us"
          class="flex items-center gap-2 px-4 py-3 rounded-lg hover:bg-gray-100 cursor-pointer"
        >
          <i data-lucide="info" class="w-4 h-4"></i> About Us
        </a>

        <!-- Mobile Services Accordion -->
        <details class="group">
          <summary
            class="flex justify-between items-center px-4 py-3 rounded-lg hover:bg-gray-100 cursor-pointer"
          >
            Services
            <i
              data-lucide="chevron-down"
              class="w-4 h-4 transition-transform group-open:rotate-180"
            ></i>
          </summary>
          <div class="pl-6 flex flex-col gap-4 mt-2 text-sm">
            <a
              href="#service-1"
              class="flex items-center gap-2 px-3 py-2 hover:bg-[#fcaf1b] hover:text-white cursor-pointer rounded-lg"
            >
              <i data-lucide="layers" class="w-4 h-4"></i> Mutual Funds
            </a>
            <a
              href="#service-2"
              class="flex items-center gap-2 px-3 py-2 hover:bg-[#fcaf1b] hover:text-white cursor-pointer rounded-lg"
            >
              <i data-lucide="calendar-check" class="w-4 h-4"></i> Retirement
              Planning
            </a>
            <a
              href="#service-3"
              class="flex items-center gap-2 px-3 py-2 hover:bg-[#fcaf1b] hover:text-white cursor-pointer rounded-lg"
            >
              <i data-lucide="file-text" class="w-4 h-4"></i> Tax Planning
            </a>
            <a
              href="#service-4"
              class="flex items-center gap-2 px-3 py-2 hover:bg-[#fcaf1b] hover:text-white cursor-pointer rounded-lg"
            >
              <i data-lucide="shield-check" class="w-4 h-4"></i> Insurance
              Planning
            </a>
            <a
              href="#service-5"
              class="flex items-center gap-2 px-3 py-2 hover:bg-[#fcaf1b] hover:text-white cursor-pointer rounded-lg"
            >
              <i data-lucide="archive" class="w-4 h-4"></i> Legacy Planning
            </a>
          </div>
        </details>

        <!-- Mobile Calculator Accordion -->
        <details class="group">
          <summary
            class="flex justify-between items-center px-4 py-3 rounded-lg hover:bg-gray-100 cursor-pointer"
          >
            Calculator
            <i
              data-lucide="chevron-down"
              class="w-4 h-4 transition-transform group-open:rotate-180"
            ></i>
          </summary>
          <div class="pl-6 flex flex-col gap-4 mt-2 text-sm">
            <a
              href="../calculators/sip-calculator.html"
              class="flex items-center gap-2 px-3 py-2 hover:bg-[#fcaf1b] hover:text-white cursor-pointer rounded-lg"
            >
              <i data-lucide="calculator" class="w-4 h-4"></i> SIP Calculator
            </a>
            <a
              href="../calculators/lump-sump-calculator.html"
              class="flex items-center gap-2 px-3 py-2 hover:bg-[#fcaf1b] hover:text-white cursor-pointer rounded-lg"
            >
              <i data-lucide="percent" class="w-4 h-4"></i> Lump Sum
            </a>

            <a
              href="../calculators/swp-calculator.html"
              class="flex items-center gap-2 px-3 py-2 hover:bg-[#fcaf1b] hover:text-white cursor-pointer rounded-lg"
            >
              <i data-lucide="activity" class="w-4 h-4"></i> SPW Calculator
            </a>
            <a
              href="../calculators/inflation-calculator.html"
              class="flex items-center gap-3 px-4 py-2 hover:bg-[#fcaf1b] hover:text-white rounded-b-lg cursor-pointer"
            >
              <i data-lucide="trending-up" class="w-4 h-4"></i> Inflation
              Calculator
            </a>
          </div>
        </details>

        <!-- Mobile Financial Literacy Accordion -->
        <details class="group">
          <summary
            class="flex justify-between items-center px-4 py-3 rounded-lg hover:bg-gray-100 cursor-pointer"
          >
            Financial Literacy
            <i
              data-lucide="chevron-down"
              class="w-4 h-4 transition-transform group-open:rotate-180"
            ></i>
          </summary>
          <div class="pl-6 flex flex-col gap-4 mt-2 text-sm">
            <a
              href="#lit-1"
              class="flex items-center gap-2 px-3 py-2 hover:bg-[#fcaf1b] hover:text-white cursor-pointer rounded-lg"
            >
              <i data-lucide="book-open" class="w-4 h-4"></i> Basics
            </a>
            <a
              href="#lit-2"
              class="flex items-center gap-2 px-3 py-2 hover:bg-[#fcaf1b] hover:text-white cursor-pointer rounded-lg"
            >
              <i data-lucide="lightbulb" class="w-4 h-4"></i> Tips & Guides
            </a>
            <a
              href="#lit-3"
              class="flex items-center gap-2 px-3 py-2 hover:bg-[#fcaf1b] hover:text-white cursor-pointer rounded-lg"
            >
              <i data-lucide="play-circle" class="w-4 h-4"></i> Video Lessons
            </a>
          </div>
        </details>

        <!-- Additional mobile navigation links -->
        <a
          href="#nri-corner"
          class="flex items-center gap-2 px-4 py-3 rounded-lg hover:bg-gray-100 cursor-pointer"
        >
          <i data-lucide="globe" class="w-4 h-4"></i> NRI Corner
        </a>
        <a
          href="#contact-us"
          class="flex items-center gap-2 px-4 py-3 rounded-lg hover:bg-gray-100 cursor-pointer"
        >
          <i data-lucide="phone-call" class="w-4 h-4"></i> Contact Us
        </a>
      </div>

      <!-- Mobile CTA button at bottom -->
      <div class="p-6">
        <a
          href="#"
          class="inline-flex items-center bg-[#fcaf1b] text-[#161f48] pl-5 pr-3 py-2 rounded-full text-sm gap-3 group transition hover:bg-[#161f48] hover:text-white"
        >
          Get Free Assessment
          <span
            class="bg-white text-black rounded-full p-1.5 flex items-center justify-center transition-transform group-hover:translate-x-1"
          >
            <i data-lucide="arrow-right" class="w-4 h-4"></i>
          </span>
        </a>
      </div>
    </div>
    <!-- FOOTER SECTION - Company information and links -->
    <!-- =================================================================== -->
    <footer class="w-full bg-white border-t border-gray-200 mt-8">
      <!-- Top Nav Links -->
      <div
        class="max-w-7xl mx-auto px-6 py-6 flex flex-wrap justify-center md:justify-between gap-6 text-sm text-gray-700"
      >
        <a href="/about" class="hover:text-[#fcaf1b] transition">About Us</a>
        <a href="/services" class="hover:text-[#fcaf1b] transition">Services</a>
        <a href="/calculators" class="hover:text-[#fcaf1b] transition"
          >Calculators</a
        >
        <a href="/financial-literacy" class="hover:text-[#fcaf1b] transition"
          >Financial Literacy</a
        >
        <a href="/nri-corner" class="hover:text-[#fcaf1b] transition"
          >NRI Corner</a
        >
        <a href="/contact" class="hover:text-[#fcaf1b] transition"
          >Contact Us</a
        >
      </div>

      <!-- Middle Section -->
      <div
        class="max-w-7xl mx-auto px-6 py-10 grid grid-cols-1 md:grid-cols-3 gap-8 text-center md:text-left"
      >
        <!-- Left: Info -->
        <div class="space-y-4">
          <a
            href="https://goo.gl/maps/yourlocation"
            target="_blank"
            rel="noopener"
            class="flex items-center justify-center md:justify-start gap-2 text-gray-800"
          >
            <i data-lucide="map-pin" class="w-5 h-5 text-[#fcaf1b]"></i> Our
            Office
          </a>
          <a
            href="mailto:info@cfs.com"
            class="flex items-center justify-center md:justify-start gap-2 text-gray-800"
          >
            <i data-lucide="mail" class="w-5 h-5 text-[#fcaf1b]"></i>
            info@cfs.com
          </a>
          <a
            href="tel:+918208031927"
            class="flex items-center justify-center md:justify-start gap-2 text-gray-800"
          >
            <i data-lucide="phone" class="w-5 h-5 text-[#fcaf1b]"></i>
            +91 82080 31927
          </a>
        </div>

        <!-- Center: Logo -->
        <div class="flex flex-col items-center">
          <img
            src="../assets/Logo.svg"
            alt="Chimulkar Financial Services"
            class="w-40 h-auto mb-4"
          />
          <p class="text-gray-800 text-sm">Chimulkar Financial Services</p>
        </div>

        <!-- Right: Reviews & Social -->
        <div class="flex flex-col items-center md:items-end space-y-4">
          <p class="text-gray-800">1400 Five-Star Google Reviews</p>
          <div class="flex gap-1">
            <i
              data-lucide="star"
              class="w-5 h-5 fill-yellow-400 text-yellow-400"
            ></i>
            <i
              data-lucide="star"
              class="w-5 h-5 fill-yellow-400 text-yellow-400"
            ></i>
            <i
              data-lucide="star"
              class="w-5 h-5 fill-yellow-400 text-yellow-400"
            ></i>
            <i
              data-lucide="star"
              class="w-5 h-5 fill-yellow-400 text-yellow-400"
            ></i>
            <i
              data-lucide="star"
              class="w-5 h-5 fill-yellow-400 text-yellow-400"
            ></i>
          </div>
          <div class="flex gap-4">
            <a
              href="https://facebook.com"
              target="_blank"
              aria-label="Facebook"
              class="bg-yellow-100 rounded-full p-2 hover:bg-yellow-200 transition"
            >
              <i data-lucide="facebook" class="w-5 h-5 text-gray-800"></i>
            </a>
            <a
              href="https://linkedin.com"
              target="_blank"
              aria-label="LinkedIn"
              class="bg-yellow-100 rounded-full p-2 hover:bg-yellow-200 transition"
            >
              <i data-lucide="linkedin" class="w-5 h-5 text-gray-800"></i>
            </a>
            <a
              href="https://youtube.com"
              target="_blank"
              aria-label="YouTube"
              class="bg-yellow-100 rounded-full p-2 hover:bg-yellow-200 transition"
            >
              <i data-lucide="youtube" class="w-5 h-5 text-gray-800"></i>
            </a>
          </div>
        </div>
      </div>

      <!-- Bottom Bar -->
      <div class="bg-[#161f48] text-gray-100 text-xs text-center py-4">
        <div
          class="max-w-7xl mx-auto px-6 flex flex-col md:flex-row justify-between items-center gap-2"
        >
          <p>© 2025 Chimulkar Financial Services | Financial Consultant</p>
          <div class="flex gap-4">
            <a href="/terms" class="hover:underline">Terms & Conditions</a>
            <a href="/privacy-policy" class="hover:underline">Privacy Policy</a>
            <a href="/sitemap" class="hover:underline">Sitemap</a>
          </div>
          <p class="text-gray-400">
            Designed & Developed by
            <a
              href="https://github.com/Niraj-Paswan"
              target="_blank"
              class="text-white hover:underline"
              >~Niraj Paswan</a
            >
          </p>
        </div>
      </div>
    </footer>
    <script src="https://unpkg.com/lucide@latest"></script>

    <script>
      lucide.createIcons();
    </script>

    <script>
      // Get mobile menu elements
      const mobileMenuToggle = document.getElementById("menuToggle");
      const mobileMenuClose = document.getElementById("closeMenu");
      const mobileMenuPanel = document.getElementById("mobileMenu");
      const mobileMenuBackdrop = document.getElementById("backdrop");

      // Open mobile menu function
      function openMobileMenu() {
        mobileMenuPanel.classList.remove("translate-x-full");
        mobileMenuBackdrop.classList.remove("hidden");
        setTimeout(() => mobileMenuBackdrop.classList.remove("opacity-0"), 10);
      }

      // Close mobile menu function
      function closeMobileMenu() {
        mobileMenuPanel.classList.add("translate-x-full");
        mobileMenuBackdrop.classList.add("opacity-0");
        setTimeout(() => mobileMenuBackdrop.classList.add("hidden"), 300);
      }

      // Event listeners for mobile menu
      mobileMenuToggle.addEventListener("click", openMobileMenu);
      mobileMenuClose.addEventListener("click", closeMobileMenu);
      mobileMenuBackdrop.addEventListener("click", closeMobileMenu);
    </script>
    <script>
      let chart;
      let isTargetMode = false; // Default to Lumpsum Investment Mode
      // Global variables to store latest calculated results
      let lastCalculatedInvestment = 0;
      let lastCalculatedReturns = 0;
      let lastCalculatedTotal = 0;
      let lastCalculatedGrowthPercentage = 0;
      let lastCalculatedRequiredLumpsum = 0;
      let lastCalculatedInflationAdjustedTarget = 0; // New global variable for inflation adjusted target
      let lastExpectedInflation = 0; // Added for sharing

      // Initialize chart with specific colors and simplified legend
      function initChart() {
        const ctx = document.getElementById("lumpsumChart").getContext("2d");
        chart = new Chart(ctx, {
          type: "doughnut",
          data: {
            labels: ["Invested amount", "Est. returns"], // Default labels for Lumpsum mode
            datasets: [
              {
                data: [1000000, 2104000], // Initial dummy data for Lumpsum mode (10L invested, 21.04L returns)
                backgroundColor: [
                  "#d1d5db", // Light grey for invested amount
                  "#161f48", // Secondary color for estimated returns
                ],
                borderColor: "white",
                borderWidth: 2,
                cutout: "80%",
              },
            ],
          },
          options: {
            responsive: true,
            maintainAspectRatio: true,
            plugins: {
              legend: {
                display: false, // Custom legend handled in HTML
              },
              tooltip: {
                enabled: true,
                callbacks: {
                  label: function (context) {
                    let label = context.label || "";
                    if (label) {
                      label += ": ";
                    }
                    if (context.parsed !== null) {
                      label += formatCurrency(context.parsed);
                    }
                    return label;
                  },
                },
              },
            },
            animation: {
              animateRotate: true,
              duration: 800,
              easing: "easeOutQuart",
            },
          },
        });
      }
      // Format number to Indian currency format (Lakhs, Crores)
      function formatCurrency(amount) {
        if (amount >= 10000000) {
          return "₹" + (amount / 10000000).toFixed(2) + " Crores";
        } else if (amount >= 100000) {
          return "₹" + (amount / 100000).toFixed(2) + " Lakhs";
        } else {
          return "₹" + Math.round(amount).toLocaleString("en-IN");
        }
      }
      // Formats a number with Indian comma system for input fields
      function formatNumberWithIndianCommas(num) {
        if (isNaN(num) || num === null) return "";
        return Number(num).toLocaleString("en-IN", {
          maximumFractionDigits: 0,
        });
      }
      // Parses an Indian-formatted string back to a number
      function parseIndianFormattedNumber(str) {
        if (!str) return 0;
        return parseFloat(str.replace(/[^0-9.]/g, ""));
      }

      // New function to update all results and their visibility
      function updateResults(
        investment,
        returns,
        total,
        growth,
        inflationAdjustedTarget = 0,
        requiredLumpsum = 0
      ) {
        // Update main values
        document.getElementById("expectedGrowth").textContent =
          formatCurrency(returns);
        document.getElementById("totalValue").textContent =
          formatCurrency(total);
        document.getElementById("totalValueCenter").textContent =
          formatCurrency(total);

        // Get result item elements
        const requiredLumpsumItem = document.getElementById(
          "requiredLumpsumItem"
        );
        const inflationAdjustedTargetItem = document.getElementById(
          "inflationAdjustedTargetItem"
        );
        const investedAmountItem =
          document.getElementById("investedAmountItem");
        const expectedGrowthItem =
          document.getElementById("expectedGrowthItem");
        const totalValueItem = document.getElementById("totalValueItem");
        const growthPercentageItem = document.getElementById(
          "growthPercentageItem"
        );
        const inflationToggle = document.getElementById("inflationToggle");

        // Handle visibility based on mode
        if (isTargetMode) {
          // Target Mode: Show required lumpsum, inflation adjusted target (if enabled), and estimated returns (from target calculation)
          requiredLumpsumItem.classList.remove("hidden");
          document.getElementById("requiredLumpsum").textContent =
            formatCurrency(requiredLumpsum);

          if (inflationToggle.checked) {
            inflationAdjustedTargetItem.classList.remove("hidden");
            document.getElementById(
              "inflationAdjustedTargetValue"
            ).textContent = formatCurrency(inflationAdjustedTarget);
            totalValueItem.classList.add("hidden"); // Hide total value if inflation adjusted target is shown
          } else {
            inflationAdjustedTargetItem.classList.add("hidden");
            totalValueItem.classList.remove("hidden"); // Show total value if inflation adjusted target is not shown
          }

          // In target mode, "Invested amount" label becomes "Est. Lump sum amount invested" (handled by requiredLumpsumItem)
          // "Est. returns" is still relevant, but its value comes from the target calculation
          // "Total value" is the target amount itself
          investedAmountItem.classList.add("hidden"); // Hide the original "Invested amount"
          growthPercentageItem.classList.add("hidden"); // Hide growth percentage in target mode

          // Update chart data: required investment vs expected growth to reach target
          chart.data.datasets[0].data = [requiredLumpsum, returns]; // returns here is the 'expected growth' to reach target
          chart.data.labels = ["Required Investment", "Expected Growth"];
        } else {
          // Lumpsum Mode: Show invested amount, estimated returns, total value, growth percentage
          requiredLumpsumItem.classList.add("hidden");
          inflationAdjustedTargetItem.classList.add("hidden");
          investedAmountItem.classList.remove("hidden");
          growthPercentageItem.classList.remove("hidden");
          totalValueItem.classList.remove("hidden"); // Always show total value in lumpsum mode

          document.getElementById("totalInvestment").textContent =
            formatCurrency(investment);
          document.getElementById("growthPercentage").textContent =
            growth.toFixed(1) + "%";

          // Update chart data: invested amount vs estimated returns
          chart.data.datasets[0].data = [investment, returns];
          chart.data.labels = ["Invested amount", "Est. returns"];
        }

        chart.update("active");

        // Store raw values for sharing
        lastCalculatedInvestment = investment;
        lastCalculatedReturns = returns;
        lastCalculatedTotal = total;
        lastCalculatedGrowthPercentage = growth;
        lastCalculatedRequiredLumpsum = requiredLumpsum;
        lastCalculatedInflationAdjustedTarget = inflationAdjustedTarget;
      }

      // Calculate required Lumpsum (Target Mode)
      function calculateRequiredLumpsumInvestment() {
        const targetAmount = parseIndianFormattedNumber(
          document.getElementById("amountInput").value
        );
        const annualReturn = parseFloat(
          document.getElementById("returnInput").value
        );
        const years = parseInt(document.getElementById("timeInput").value);
        const inflationEnabled =
          document.getElementById("inflationToggle").checked;
        const expectedInflation = inflationEnabled
          ? parseFloat(document.getElementById("inflationInput").value)
          : 0;
        lastExpectedInflation = expectedInflation; // Store for sharing

        let inflationAdjustedTarget = targetAmount;
        // Adjust target amount for inflation if toggle is on
        if (inflationEnabled) {
          const inflationRatePerPeriod = expectedInflation / 100;
          // Corrected: Target amount needs to be higher to maintain purchasing power
          inflationAdjustedTarget =
            targetAmount * Math.pow(1 + inflationRatePerPeriod, years);
        }

        let requiredLumpsum = 0;
        if (annualReturn === 0) {
          requiredLumpsum = inflationAdjustedTarget;
        } else {
          requiredLumpsum =
            inflationAdjustedTarget / Math.pow(1 + annualReturn / 100, years);
        }

        // For chart and other results, calculate what this required Lumpsum would yield
        const futureValueFromRequiredLumpsum =
          requiredLumpsum * Math.pow(1 + annualReturn / 100, years);
        const expectedGrowth = futureValueFromRequiredLumpsum - requiredLumpsum;

        // Update display using the new updateResults function
        updateResults(
          requiredLumpsum, // This is the 'investment' for chart purposes in target mode
          expectedGrowth, // This is the 'returns' for chart purposes in target mode
          inflationAdjustedTarget, // Total value is the inflation adjusted target
          0, // Growth percentage is not shown in target mode
          inflationAdjustedTarget, // Pass inflation adjusted target
          requiredLumpsum // Pass required lumpsum
        );
      }

      // Calculate Lumpsum (Lumpsum Investment Mode)
      function calculateLumpsumInvestment() {
        const lumpsumInvestment = parseIndianFormattedNumber(
          document.getElementById("amountInput").value
        );
        const annualReturn = parseFloat(
          document.getElementById("returnInput").value
        );
        const years = parseInt(document.getElementById("timeInput").value);

        const futureValue =
          lumpsumInvestment * Math.pow(1 + annualReturn / 100, years);
        const totalInvestment = lumpsumInvestment;
        const expectedReturns = futureValue - totalInvestment;
        const growthPercentage =
          totalInvestment > 0 ? (expectedReturns / totalInvestment) * 100 : 0;

        // Update display using the new updateResults function
        updateResults(
          totalInvestment,
          expectedReturns,
          futureValue,
          growthPercentage,
          0, // No inflation adjusted target in lumpsum mode
          0 // No required lumpsum in lumpsum mode
        );
      }

      // Toggle between modes (Lumpsum vs Target)
      function toggleMode(targetMode) {
        isTargetMode = targetMode;
        const lumpsumBtn = document.getElementById("lumpsumModeBtn");
        const targetBtn = document.getElementById("targetModeBtn");

        const inflationToggleSection = document.getElementById(
          "inflationToggleSection"
        );
        const inflationToggle = document.getElementById("inflationToggle");
        const inflationControls = document.getElementById("inflationControls");

        const amountLabel = document.getElementById("amountLabel");
        const amountInput = document.getElementById("amountInput");
        const amountSlider = document.getElementById("amountSlider");
        const amountMinSpan = amountSlider.nextElementSibling.children[0];
        const amountMaxSpan = amountSlider.nextElementSibling.children[1];

        const legendLabel1 = document.getElementById("legendLabel1");
        const legendLabel2 = document.getElementById("legendLabel2");

        // Reset inflation toggle and hide controls when switching modes
        inflationToggle.checked = false;
        inflationControls.classList.add(
          "hidden",
          "opacity-50",
          "pointer-events-none"
        );

        if (targetMode) {
          // Switch to Target Mode
          targetBtn.classList.add("bg-white", "text-gray-800", "shadow-sm");
          targetBtn.classList.remove("text-gray-600", "hover:bg-gray-200");
          lumpsumBtn.classList.remove("bg-white", "text-gray-800", "shadow-sm");
          lumpsumBtn.classList.add("text-gray-600", "hover:bg-gray-200");

          // Show inflation controls toggle
          inflationToggleSection.classList.remove("hidden");

          // Update input controls
          amountLabel.textContent = "Target Amount";
          amountInput.value = formatNumberWithIndianCommas(1000000); // Default target 10L
          amountInput.min = "100000"; // Min target 1 Lakh
          amountInput.max = "10000000"; // Max target 1 Cr
          amountSlider.value = "1000000";
          amountSlider.min = "100000";
          amountSlider.max = "10000000";
          amountMinSpan.textContent = "₹1L";
          amountMaxSpan.textContent = "₹1Cr";

          // Update legend labels for chart
          legendLabel1.textContent = "Required Investment";
          legendLabel2.textContent = "Expected Growth";

          calculateRequiredLumpsumInvestment();
        } else {
          // Switch to Lumpsum Mode
          lumpsumBtn.classList.add("bg-white", "text-gray-800", "shadow-sm");
          lumpsumBtn.classList.remove("text-gray-600", "hover:bg-gray-200");
          targetBtn.classList.remove("bg-white", "text-gray-800", "shadow-sm");
          targetBtn.classList.add("text-gray-600", "hover:bg-gray-200");

          // Hide inflation controls
          inflationToggleSection.classList.add("hidden");
          inflationControls.classList.add("hidden"); // Ensure inflation input is hidden

          // Update input controls
          amountLabel.textContent = "Lumpsum Investment";
          amountInput.value = formatNumberWithIndianCommas(1000000); // Default lumpsum 10L
          amountInput.min = "10000";
          amountInput.max = "100000000"; // Max lumpsum 10Cr
          amountSlider.value = "1000000";
          amountSlider.min = "10000";
          amountSlider.max = "100000000";
          amountMinSpan.textContent = "₹10K";
          amountMaxSpan.textContent = "₹10Cr";

          // Update legend labels for chart
          legendLabel1.textContent = "Invested amount";
          legendLabel2.textContent = "Est. returns";

          calculateLumpsumInvestment();
        }
      }
      // Function to generate email content and open mail client
      function sendEmailPlan() {
        const subject = encodeURIComponent("My Lumpsum Calculator Plan");
        let body = `Hello,\n\nHere is my Lumpsum calculation plan:\n\n`;

        body += `Expected Return Rate: ${
          document.getElementById("returnInput").value
        }%\n`;
        body += `Time Period: ${
          document.getElementById("timeInput").value
        } Years\n\n`;

        body += `--- Results ---\n`;

        if (isTargetMode) {
          body += `Mode: Target Amount\n`;
          body += `Target Amount: ${formatCurrency(
            parseIndianFormattedNumber(
              document.getElementById("amountInput").value
            )
          )}\n`;
          const inflationEnabled =
            document.getElementById("inflationToggle").checked;
          if (inflationEnabled) {
            body += `Expected Inflation: ${lastExpectedInflation.toFixed(
              1
            )}%\n`;
            body += `Target amount (inflation adjusted): ${formatCurrency(
              lastCalculatedInflationAdjustedTarget
            )}\n`;
          } else {
            body += `Expected Inflation: Not considered\n`;
          }
          body += `Est. Lump sum amount invested: ${formatCurrency(
            lastCalculatedRequiredLumpsum
          )}\n`;
          body += `Estimated returns: ${formatCurrency(
            lastCalculatedReturns
          )}\n`; // This is the growth to reach target
          if (!inflationEnabled) {
            // Only include total value if inflation is NOT enabled
            body += `Total value: ${formatCurrency(lastCalculatedTotal)}\n\n`; // This is the target amount
          }
        } else {
          body += `Mode: Lumpsum Investment\n`;
          body += `Lumpsum Investment: ${formatCurrency(
            lastCalculatedInvestment
          )}\n`;
          body += `Estimated returns: ${formatCurrency(
            lastCalculatedReturns
          )}\n`;
          body += `Total value: ${formatCurrency(lastCalculatedTotal)}\n`;
          body += `Growth Percentage: ${lastCalculatedGrowthPercentage.toFixed(
            1
          )}%\n\n`;
        }

        body += `Calculated using Chimulkar Financial Services Calculators.\n\n`;
        window.location.href = `mailto:?subject=${subject}&body=${encodeURIComponent(
          body
        )}`;
      }
      // Function to generate WhatsApp message and open WhatsApp
      function sendWhatsAppPlan() {
        let message = `My Lumpsum Calculation Plan:\n\n`;

        message += `Expected Return Rate: ${
          document.getElementById("returnInput").value
        }%\n`;
        message += `Time Period: ${
          document.getElementById("timeInput").value
        } Years\n\n`;

        message += `--- Results ---\n`;

        if (isTargetMode) {
          message += `Mode: Target Amount\n`;
          message += `Target Amount: ${formatCurrency(
            parseIndianFormattedNumber(
              document.getElementById("amountInput").value
            )
          )}\n`;
          const inflationEnabled =
            document.getElementById("inflationToggle").checked;
          if (inflationEnabled) {
            message += `Expected Inflation: ${lastExpectedInflation.toFixed(
              1
            )}%\n`;
            message += `Target amount (inflation adjusted): ${formatCurrency(
              lastCalculatedInflationAdjustedTarget
            )}\n`;
          } else {
            message += `Expected Inflation: Not considered\n`;
          }
          message += `Est. Lump sum amount invested: ${formatCurrency(
            lastCalculatedRequiredLumpsum
          )}\n`;
          message += `Estimated returns: ${formatCurrency(
            lastCalculatedReturns
          )}\n`; // This is the growth to reach target
          if (!inflationEnabled) {
            // Only include total value if inflation is NOT enabled
            message += `Total value: ${formatCurrency(
              lastCalculatedTotal
            )}\n\n`; // This is the target amount
          }
        } else {
          message += `Mode: Lumpsum Investment\n`;
          message += `Lumpsum Investment: ${formatCurrency(
            lastCalculatedInvestment
          )}\n`;
          message += `Estimated returns: ${formatCurrency(
            lastCalculatedReturns
          )}\n`;
          message += `Total value: ${formatCurrency(lastCalculatedTotal)}\n`;
          message += `Growth Percentage: ${lastCalculatedGrowthPercentage.toFixed(
            1
          )}%\n\n`;
        }

        message += `Calculated using Chimulkar Financial Services Calculator.`;
        window.open(
          `https://wa.me/?text=${encodeURIComponent(message)}`,
          "_blank"
        );
      }
      // Function to download a screenshot of the calculator
      function downloadCalculatorImage() {
        const calculatorElement = document.getElementById(
          "calculatorContainer"
        );
        html2canvas(calculatorElement, {
          scale: 2,
          useCORS: true,
          logging: false,
        })
          .then((canvas) => {
            const link = document.createElement("a");
            link.download = "lumpsum_calculator_plan.png";
            link.href = canvas.toDataURL("image/png");
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
          })
          .catch((error) => {
            console.error("Error capturing calculator image:", error);
            alert("Failed to capture image. Please try again.");
          });
      }
      // Setup event listeners
      function setupEventListeners() {
        // Mode toggle
        document
          .getElementById("lumpsumModeBtn")
          .addEventListener("click", () => toggleMode(false));
        document
          .getElementById("targetModeBtn")
          .addEventListener("click", () => toggleMode(true));
        // Inflation toggle
        const inflationToggle = document.getElementById("inflationToggle");
        const inflationControls = document.getElementById("inflationControls");
        inflationToggle.addEventListener("change", function () {
          if (this.checked) {
            inflationControls.classList.remove(
              "hidden",
              "opacity-50",
              "pointer-events-none"
            );
          } else {
            inflationControls.classList.add(
              "hidden",
              "opacity-50",
              "pointer-events-none"
            );
          }
          if (isTargetMode) {
            calculateRequiredLumpsumInvestment();
          }
        });
        // Action Buttons
        document
          .getElementById("emailPlanBtn")
          .addEventListener("click", sendEmailPlan);
        document
          .getElementById("whatsappBtn")
          .addEventListener("click", sendWhatsAppPlan);
        document
          .getElementById("downloadImageBtn")
          .addEventListener("click", downloadCalculatorImage);
        // Input and Slider sync
        const inputs = [
          { id: "amount", slider: "amountSlider", input: "amountInput" },
          { id: "return", slider: "returnSlider", input: "returnInput" },
          { id: "time", slider: "timeSlider", input: "timeInput" },
          {
            id: "inflation",
            slider: "inflationSlider",
            input: "inflationInput",
          },
        ];
        inputs.forEach((item) => {
          const slider = document.getElementById(item.slider);
          const input = document.getElementById(item.input);
          if (item.id === "amount") {
            // Special handling for amount input with Indian commas
            input.addEventListener("input", function () {
              let parsedValue = parseIndianFormattedNumber(this.value);
              slider.value = parsedValue;
              this.value = formatNumberWithIndianCommas(parsedValue);
              isTargetMode
                ? calculateRequiredLumpsumInvestment()
                : calculateLumpsumInvestment();
            });
            slider.addEventListener("input", function () {
              input.value = formatNumberWithIndianCommas(
                parseFloat(this.value)
              );
              isTargetMode
                ? calculateRequiredLumpsumInvestment()
                : calculateLumpsumInvestment();
            });
          } else {
            // Standard handling for other number inputs
            input.addEventListener("input", function () {
              slider.value = this.value;
              isTargetMode
                ? calculateRequiredLumpsumInvestment()
                : calculateLumpsumInvestment();
            });
            slider.addEventListener("input", function () {
              input.value = this.value;
              isTargetMode
                ? calculateRequiredLumpsumInvestment()
                : calculateLumpsumInvestment();
            });
          }
        });
      }
      // Initialize everything on load
      window.addEventListener("load", function () {
        initChart();
        setupEventListeners();
        // Initial calculation (default to Lumpsum Investment Mode)
        calculateLumpsumInvestment();
      });
    </script>
  </body>
</html>
