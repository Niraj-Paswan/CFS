<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SWP Calculator - CFS</title>
    <link rel="shortcut icon" href="../assets/Logo.svg" type="image/x-icon" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Add html2canvas library for screenshots -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Poppins", sans-serif;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }
      /* Custom Slider Styles */
      .custom-slider {
        -webkit-appearance: none;
        appearance: none;
        height: 6px;
        border-radius: 3px;
        background: #e5e7eb;
        outline: none;
        transition: all 0.3s ease;
      }
      .custom-slider::-webkit-slider-thumb {
        -webkit-appearance: none;
        appearance: none;
        width: 20px;
        height: 20px;
        border-radius: 50%;
        background: #fcaf1b;
        cursor: grab;
        border: none;
        box-shadow: 0 2px 6px rgba(252, 175, 27, 0.4);
        transition: all 0.2s ease;
      }
      .custom-slider::-webkit-slider-thumb:active {
        cursor: grabbing;
      }
      .custom-slider::-moz-range-thumb {
        width: 20px;
        height: 20px;
        border-radius: 50%;
        background: #fcaf1b;
        cursor: grab;
        border: none;
        box-shadow: 0 2px 6px rgba(252, 175, 27, 0.4);
        transition: all 0.2s ease;
      }
      /* Toggle Switch */
      .toggle-switch {
        position: relative;
        display: inline-block;
        width: 48px;
        height: 28px;
      }
      .toggle-switch input {
        opacity: 0;
        width: 0;
        height: 0;
      }
      .toggle-slider {
        position: absolute;
        cursor: pointer;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: #e5e7eb;
        transition: all 0.3s ease;
        border-radius: 28px;
      }
      .toggle-slider:before {
        position: absolute;
        content: "";
        height: 20px;
        width: 20px;
        left: 4px;
        bottom: 4px;
        background-color: white;
        transition: all 0.3s ease;
        border-radius: 50%;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
      }
      input:checked + .toggle-slider {
        background-color: #161f48;
      }
      input:checked + .toggle-slider:before {
        transform: translateX(20px);
      }
      /* Input field styling */
      .input-value-box {
        background-color: #f3f4f6;
        border-radius: 8px;
        padding: 8px 12px;
        font-weight: 600;
        color: #1f2937;
        display: flex;
        align-items: center;
        gap: 4px;
        transition: all 0.2s ease;
      }
      .input-value-box:focus-within {
        box-shadow: 0 0 0 2px rgba(22, 31, 72, 0.2);
      }
      .input-value-box input {
        background: none;
        border: none;
        outline: none;
        width: 100%;
        font-weight: 600;
        color: #1f2937;
        text-align: right;
        padding: 0;
      }
      /* Result item styling */
      .result-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 12px 0;
        border-bottom: 1px solid #f3f4f6;
      }
      .result-item:last-child {
        border-bottom: none;
      }
      .result-item .label {
        font-weight: 500;
        color: #4b5563;
      }
      .result-item .value {
        font-weight: 600;
        color: #1f2937;
      }
      /* Chart legend dots */
      .chart-legend-dot {
        width: 10px;
        height: 10px;
        border-radius: 50%;
        display: inline-block;
        margin-right: 8px;
      }
    </style>
  </head>
  <body
    class="bg-gray-100 flex flex-col items-center justify-center min-h-screen"
  >
    <section
      class="max-w-6xl w-full flex justify-center items-center text-center flex-col p-4 mt-16"
    >
      <div
        class="max-w-6xl w-full flex justify-center items-center text-center flex-col"
      >
        <div class="text-center mb-8 mt-8">
          <h1 class="text-2xl lg:text-4xl font-semibold text-black mb-3">
            Systematic Withdrawal Plan
            <span class="text-[#fcaf1b]">Calculator</span>
          </h1>
          <p class="text-gray-500 text-base lg:text-lg">
            Plan your monthly withdrawals smartly. Save or share your results
            with ease.
          </p>
        </div>
        <div
          id="calculatorContainer"
          class="max-w-6xl w-full bg-white p-4 rounded-3xl border border-gray-300 overflow-hidden"
        >
          <!-- Mode Toggle (Monthly vs Yearly) -->
          <div class="flex justify-center p-2 mt-1 border-b border-gray-100">
            <div class="inline-flex bg-gray-100 rounded-lg p-1">
              <button
                id="monthlyModeBtn"
                class="px-5 py-2 text-base font-medium rounded-md transition-colors duration-200 bg-white text-gray-800 shadow-base cursor-pointer"
              >
                Monthly SWP
              </button>
              <button
                id="yearlyModeBtn"
                class="px-5 py-2 text-base font-medium rounded-md transition-colors duration-200 text-gray-600 hover:bg-gray-200 cursor-pointer"
              >
                Yearly SWP
              </button>
            </div>
          </div>
          <div class="grid lg:grid-cols-2 gap-8 p-8 text-start">
            <!-- Left Side - Input Controls -->
            <div class="space-y-8">
              <!-- Initial Investment -->
              <div>
                <div class="flex items-center justify-between mb-3 text-start">
                  <label class="text-lg font-medium text-gray-700"
                    >Portfolio Value</label
                  >
                  <div class="input-value-box w-40">
                    <span class="text-gray-500">₹</span>
                    <input
                      type="text"
                      id="investmentInput"
                      value="10,00,000"
                      min="50000"
                      max="100000000"
                      step="1000"
                    />
                  </div>
                </div>
                <input
                  type="range"
                  id="investmentSlider"
                  min="50000"
                  max="100000000"
                  value="1000000"
                  step="1000"
                  class="custom-slider w-full mt-4"
                />
                <div class="flex justify-between text-xs text-gray-500 mt-2">
                  <span>₹50K</span>
                  <span>₹10Cr</span>
                </div>
              </div>

              <!-- Withdrawal Amount -->
              <div>
                <div class="flex items-center justify-between mb-3">
                  <label
                    id="withdrawalLabel"
                    class="text-lg font-medium text-gray-700"
                    >Monthly Withdrawal</label
                  >
                  <div class="input-value-box w-40">
                    <span class="text-gray-500">₹</span>
                    <input
                      type="text"
                      id="withdrawalInput"
                      value="10,000"
                      min="1000"
                      max="1000000"
                      step="100"
                    />
                  </div>
                </div>
                <input
                  type="range"
                  id="withdrawalSlider"
                  min="1000"
                  max="1000000"
                  value="10000"
                  step="100"
                  class="custom-slider w-full mt-4"
                />
                <div class="flex justify-between text-xs text-gray-500 mt-2">
                  <span id="withdrawalMinLabel">₹1K</span>
                  <span id="withdrawalMaxLabel">₹10L</span>
                </div>
              </div>

              <!-- Expected Return Rate -->
              <div>
                <div class="flex items-start justify-between mb-3">
                  <label class="text-lg text-start font-medium text-gray-700"
                    >Expected return rate (p.a)</label
                  >
                  <div class="input-value-box w-32">
                    <input
                      type="number"
                      id="returnInput"
                      value="12"
                      min="1"
                      max="30"
                      step="0.1"
                    />
                    <span class="text-gray-500">%</span>
                  </div>
                </div>
                <input
                  type="range"
                  id="returnSlider"
                  min="1"
                  max="30"
                  value="12"
                  step="0.1"
                  class="custom-slider w-full mt-4"
                />
                <div class="flex justify-between text-xs text-gray-500 mt-2">
                  <span>1%</span>
                  <span>30%</span>
                </div>
              </div>

              <!-- Withdrawal Period -->
              <div>
                <div class="flex items-center justify-between mb-3">
                  <label class="text-lg font-medium text-gray-700"
                    >Withdrawal Period</label
                  >
                  <div class="input-value-box w-32">
                    <input
                      type="number"
                      id="timeInput"
                      value="10"
                      min="1"
                      max="50"
                    />
                    <span class="text-gray-500">Y</span>
                  </div>
                </div>
                <input
                  type="range"
                  id="timeSlider"
                  min="1"
                  max="50"
                  value="10"
                  class="custom-slider w-full mt-4"
                />
                <div class="flex justify-between text-xs text-gray-500 mt-2">
                  <span>1Y</span>
                  <span>50Y</span>
                </div>
              </div>

              <!-- Inflation Adjustment -->
              <div id="inflationSection">
                <div class="flex items-center justify-between mb-6">
                  <label class="text-lg font-medium text-gray-700"
                    >Adjust for inflation</label
                  >
                  <label class="toggle-switch">
                    <input type="checkbox" id="inflationToggle" />
                    <span class="toggle-slider"></span>
                  </label>
                </div>

                <div id="inflationRateSection" style="display: none">
                  <div class="flex items-center justify-between mb-3">
                    <label class="text-lg font-medium text-gray-700"
                      >Expected inflation rate (p.a)</label
                    >
                    <div class="input-value-box w-32">
                      <input
                        type="number"
                        id="inflationInput"
                        value="6"
                        min="0"
                        max="15"
                        step="0.1"
                      />
                      <span class="text-gray-500">%</span>
                    </div>
                  </div>
                  <input
                    type="range"
                    id="inflationSlider"
                    min="0"
                    max="15"
                    value="6"
                    step="0.1"
                    class="custom-slider w-full mt-4"
                  />
                  <div class="flex justify-between text-xs text-gray-500 mt-2">
                    <span>0%</span>
                    <span>15%</span>
                  </div>
                </div>
              </div>

              <!-- Trigger Text -->
              <h1
                id="openDisclaimer"
                class="text-sm text-blue-600 hover:underline hover:cursor-pointer text-start"
              >
                View Disclaimer
              </h1>

              <!-- Modal -->
              <div
                id="disclaimerModal"
                class="fixed inset-0 p-4 bg-black bg-opacity-50 flex items-center justify-center hidden z-50 transition-opacity duration-300"
              >
                <div
                  class="bg-white rounded-2xl shadow-lg max-w-4xl w-full p-8 relative transform transition-transform duration-300 scale-95"
                  id="modalContent"
                >
                  <!-- Close Button -->
                  <button
                    id="closeDisclaimer"
                    class="absolute top-3 right-3 flex items-center justify-center w-8 h-8 bg-gray-200 rounded-full hover:bg-gray-300 transition-colors duration-200 group"
                  >
                    <i
                      data-lucide="x"
                      class="text-gray-600 w-4 h-4 group-hover:rotate-90 transition-transform duration-300"
                    ></i>
                  </button>

                  <!-- Title -->
                  <h2 class="text-lg font-semibold mb-4 text-blue-700">
                    Disclaimer ⚠️
                  </h2>

                  <!-- Content -->
                  <p class="text-sm text-gray-700 leading-relaxed text-start">
                    These Calculators alone are not sufficient and shouldn't be
                    used for development or implementation of an investment
                    strategy. The examples do not purport to represent the
                    performance of any security or investments. The recipient is
                    advised to consult his or her advisor/tax consultant prior
                    to arriving at any investment decision. Mutual Funds do not
                    have a fixed rate of return and it is not possible to
                    predict the rate of return. Past performance may or may not
                    be sustained in future and is not a guarantee of any future
                    returns. Mutual Fund Investments are subject to market
                    risks, read all scheme related documents carefully.
                  </p>
                </div>
              </div>

              <script>
                const openBtn = document.getElementById("openDisclaimer");
                const closeBtn = document.getElementById("closeDisclaimer");
                const modal = document.getElementById("disclaimerModal");
                const modalContent = document.getElementById("modalContent");

                openBtn.addEventListener("click", () => {
                  modal.classList.remove("hidden");
                  setTimeout(() => {
                    modal.classList.add("opacity-100");
                    modalContent.classList.remove("scale-95");
                    modalContent.classList.add("scale-100");
                  }, 10);
                });

                const closeModal = () => {
                  modalContent.classList.remove("scale-100");
                  modalContent.classList.add("scale-95");
                  modal.classList.remove("opacity-100");
                  setTimeout(() => {
                    modal.classList.add("hidden");
                  }, 300);
                };

                closeBtn.addEventListener("click", closeModal);

                modal.addEventListener("click", (e) => {
                  if (e.target === modal) closeModal();
                });
              </script>

              <!-- Lucide Icons -->
              <script src="https://unpkg.com/lucide@latest"></script>
              <script>
                lucide.createIcons();
              </script>
            </div>

            <!-- Right Side - Results and Chart -->
            <div class="space-y-8">
              <!-- Chart -->
              <div class="flex justify-center items-center h-64">
                <div class="relative w-64 h-64">
                  <canvas id="swpChart"></canvas>
                  <div
                    class="absolute inset-0 flex items-center justify-center"
                  >
                    <div class="text-center">
                      <div class="text-sm text-gray-500">Final Balance</div>
                      <div
                        id="finalBalanceCenter"
                        class="text-xl font-semibold text-gray-800"
                      >
                        ₹0
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Chart Legend -->
              <div class="flex justify-center space-x-6 text-sm text-gray-600">
                <div>
                  <span class="chart-legend-dot bg-gray-300"></span>
                  <span>Total Withdrawn</span>
                </div>
                <div>
                  <span
                    class="chart-legend-dot"
                    style="background-color: #161f48"
                  ></span>
                  <span>Remaining Balance</span>
                </div>
              </div>

              <!-- Results -->
              <div class="space-y-2">
                <div class="result-item">
                  <span class="label">Initial Investment</span>
                  <span id="initialInvestmentResult" class="value"
                    >₹10.00 L</span
                  >
                </div>
                <div class="result-item">
                  <span class="label">Total Withdrawn</span>
                  <span id="totalWithdrawn" class="value">₹12.00 L</span>
                </div>
                <div class="result-item">
                  <span class="label">Final Balance</span>
                  <span id="finalBalance" class="value text-lg font-bold"
                    >₹8.50 L</span
                  >
                </div>
                <div class="result-item">
                  <span class="label" id="withdrawalPeriodLabel"
                    >Monthly Withdrawal</span
                  >
                  <span
                    id="withdrawalAmount"
                    class="value text-lg font-bold"
                    style="color: #161f48"
                    >₹10,000</span
                  >
                </div>
                <div class="result-item hidden">
                  <span class="label">Sustainability</span>
                  <span
                    id="sustainability"
                    class="value text-lg font-bold"
                    style="color: #fcaf1b"
                    >Sustainable</span
                  >
                </div>
              </div>
            </div>
          </div>

          <!-- Action Buttons -->
          <div class="p-8 border-t border-gray-200">
            <div class="flex flex-wrap gap-4 justify-center">
              <button
                id="emailPlanBtn"
                class="flex items-center gap-2 text-sm lg:text-base px-4 lg:px-6 py-2 lg:py-3 rounded-full text-black border border-gray-300 hover:bg-gray-100 transition-colors cursor-pointer"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  x="0px"
                  y="0px"
                  width="24"
                  height="24"
                  viewBox="0 0 48 48"
                >
                  <path
                    fill="#4caf50"
                    d="M45,16.2l-5,2.75l-5,4.75L35,40h7c1.657,0,3-1.343,3-3V16.2z"
                  ></path>
                  <path
                    fill="#1e88e5"
                    d="M3,16.2l3.614,1.71L13,23.7V40H6c-1.657,0-3-1.343-3-3V16.2z"
                  ></path>
                  <polygon
                    fill="#e53935"
                    points="35,11.2 24,19.45 13,11.2 12,17 13,23.7 24,31.95 35,23.7 36,17"
                  ></polygon>
                  <path
                    fill="#c62828"
                    d="M3,12.298V16.2l10,7.5V11.2L9.876,8.859C9.132,8.301,8.228,8,7.298,8h0C4.924,8,3,9.924,3,12.298z"
                  ></path>
                  <path
                    fill="#fbc02d"
                    d="M45,12.298V16.2l-10,7.5V11.2l3.124-2.341C38.868,8.301,39.772,8,40.702,8h0 C43.076,8,45,9.924,45,12.298z"
                  ></path>
                </svg>
                Email Plan
              </button>
              <button
                id="whatsappBtn"
                class="flex items-center gap-2 text-base px-6 py-3 rounded-full text-black border border-gray-300 hover:bg-gray-100 transition-colors cursor-pointer"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  x="0px"
                  y="0px"
                  width="24"
                  height="24"
                  viewBox="0 0 48 48"
                >
                  <path
                    fill="#fff"
                    d="M4.9,43.3l2.7-9.8C5.9,30.6,5,27.3,5,24C5,13.5,13.5,5,24,5c5.1,0,9.8,2,13.4,5.6C41,14.2,43,18.9,43,24 c0,10.5-8.5,19-19,19c0,0,0,0,0,0h0c-3.2,0-6.3-0.8-9.1-2.3L4.9,43.3z"
                  ></path>
                  <path
                    fill="#fff"
                    d="M4.9,43.8c-0.1,0-0.3-0.1-0.4-0.1c-0.1-0.1-0.2-0.3-0.1-0.5L7,33.5c-1.6-2.9-2.5-6.2-2.5-9.6  C4.5,13.2,13.3,4.5,24,4.5c5.2,0,10.1,2,13.8,5.7c3.7,3.7,5.7,8.6,5.7,13.8c0,10.7-8.7,19.5-19.5,19.5c-3.2,0-6.3-0.8-9.1-2.3 L5,43.8C5,43.8,4.9,43.8,4.9,43.8z"
                  ></path>
                  <path
                    fill="#cfd8dc"
                    d="M24,5c5.1,0,9.8,2,13.4,5.6C41,14.2,43,18.9,43,24c0,10.5-8.5,19-19,19h0c-3.2,0-6.3-0.8-9.1-2.3L4.9,43.3 l2.7-9.8C5.9,30.6,5,27.3,5,24C5,13.5,13.5,5,24,5 M24,43L24,43L24,43 M24,43L24,43L24,43 M24,4L24,4C13,4,4,13,4,24  c0,3.4,0.8,6.7,2.5,9.6L3.9,43c-0.1,0.3,0,0.7,0.3,1c0.2,0.2,0.4,0.3,0.7,0.3c0.1,0,0.2,0,0.3,0l9.7-2.5c2.8,1.5,6,2.2,9.2,2.2  c11,0,20-9,20-20c0-5.3-2.1-10.4-5.8-14.1C34.4,6.1,29.4,4,24,4L24,4z"
                  ></path>
                  <path
                    fill="#40c351"
                    d="M35.2,12.8c-3-3-6.9-4.6-11.2-4.6C15.3,8.2,8.2,15.3,8.2,24c0,3,0.8,5.9,2.4,8.4L11,33l-1.6,5.8l6-1.6l0.6,0.3 c2.4,1.4,5.2,2.2,8,2.2h0c8.7,0,15.8-7.1,15.8-15.8C39.8,19.8,38.2,15.8,35.2,12.8z"
                  ></path>
                  <path
                    fill="#fff"
                    fill-rule="evenodd"
                    d="M19.3,16c-0.4-0.8-0.7-0.8-1.1-0.8c-0.3,0-0.6,0-0.9,0s-0.8,0.1-1.3,0.6c-0.4,0.5-1.7,1.6-1.7,4 s1.7,4.6,1.9,4.9s3.3,5.3,8.1,7.2c4,1.6,4.8,1.3,5.7,1.2c0.9-0.1,2.8-1.1,3.2-2.3c0.4-1.1,0.4-2.1,0.3-2.3c-0.1-0.2-0.4-0.3-0.9-0.6 s-2.8-1.4-3.2-1.5c-0.4-0.2-0.8-0.2-1.1,0.2c-0.3,0.5-1.2,1.5-1.5,1.9c-0.3,0.3-0.6,0.4-1,0.1c-0.5-0.2-2-0.7-3.8-2.4 c-1.4-1.3-2.4-2.8-2.6-3.3c-0.3-0.5,0-0.7,0.2-1c0.2-0.2,0.5-0.6,0.7-0.8c0.2-0.3,0.3-0.5,0.5-0.8c0.2-0.3,0.1-0.6,0-0.8  C20.6,19.3,19.7,17,19.3,16z"
                    clip-rule="evenodd"
                  ></path>
                </svg>
                WhatsApp
              </button>
              <button
                id="downloadImageBtn"
                class="flex items-center gap-2 text-base px-6 py-3 rounded-full text-black border border-gray-300 hover:bg-gray-100 transition-colors cursor-pointer"
              >
                <svg
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                  <polyline points="7,10 12,15 17,10" />
                  <line x1="12" y1="15" x2="12" y2="3" />
                </svg>
                Download Image
              </button>
              <a
                href="../index.html#consultation"
                class="inline-flex items-center bg-[#fcaf1b] text-white pl-5 pr-3 py-3 rounded-full text-base gap-3 group transition hover:bg-[#161f48] shadow-md"
              >
                Start Investing
                <span
                  class="bg-white text-black rounded-full p-1.5 flex items-center justify-center transition-transform group-hover:translate-x-1"
                >
                  <svg
                    width="16"
                    height="16"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  >
                    <line x1="5" y1="12" x2="19" y2="12" />
                    <polyline points="12,5 19,12 12,19" />
                  </svg>
                </span>
              </a>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- =================================================================== -->
    <!-- NAVIGATION HEADER - Fixed position with dropdown menus -->
    <!-- =================================================================== -->
    <header class="bg-[#161f48] shadow-sm fixed w-full top-0 z-50">
      <div
        class="mx-6 lg:mx-12 px-2 py-3 flex items-center justify-between relative"
      >
        <!-- Company Logo and Trust Badge -->
        <div class="flex items-center gap-2">
          <img
            src="../assets/CFS TRANSPARENT.png"
            class="h-12 w-auto"
            alt="Chimulkar Financial Services Logo"
          />
        </div>

        <!-- Desktop Navigation Menu - Hidden on mobile -->
        <nav class="hidden md:flex gap-12 text-[16px] font-medium items-center">
          <!-- Simple navigation link -->
          <a href="#about-us" class="hover:text-[#fcaf1b] transition text-white"
            >About Us</a
          >

          <!-- Services Dropdown Menu -->
          <div class="relative group z-50">
            <button
              class="flex items-center gap-1 text-white hover:text-[#fcaf1b] transition cursor-pointer"
            >
              Services <i data-lucide="chevron-down" class="w-4 h-4"></i>
            </button>
            <!-- Dropdown content - appears on hover -->
            <div
              class="absolute top-full left-0 mt-2 bg-white rounded-lg min-w-[14rem] text-sm opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 pointer-events-auto border border-gray-300 shadow-md"
            >
              <a
                href="#service-1"
                class="flex items-center gap-3 px-4 py-2 hover:bg-[#fcaf1b] hover:text-white rounded-t-lg cursor-pointer"
              >
                <i data-lucide="layers" class="w-4 h-4"></i> Mutual Funds
              </a>
              <a
                href="#service-2"
                class="flex items-center gap-3 px-4 py-2 hover:bg-[#fcaf1b] hover:text-white cursor-pointer"
              >
                <i data-lucide="calendar-check" class="w-4 h-4"></i> Retirement
                Planning
              </a>
              <a
                href="#service-3"
                class="flex items-center gap-3 px-4 py-2 hover:bg-[#fcaf1b] hover:text-white cursor-pointer"
              >
                <i data-lucide="file-text" class="w-4 h-4"></i> Tax Planning
              </a>
              <a
                href="#service-4"
                class="flex items-center gap-3 px-4 py-2 hover:bg-[#fcaf1b] hover:text-white cursor-pointer"
              >
                <i data-lucide="shield-check" class="w-4 h-4"></i> Insurance
                Planning
              </a>
              <a
                href="#service-5"
                class="flex items-center gap-3 px-4 py-2 hover:bg-[#fcaf1b] hover:text-white rounded-b-lg cursor-pointer"
              >
                <i data-lucide="archive" class="w-4 h-4"></i> Legacy Planning
              </a>
            </div>
          </div>

          <!-- Calculator Tools Dropdown -->
          <div class="relative group z-50">
            <button
              class="flex items-center gap-1 text-white hover:text-[#fcaf1b] transition cursor-pointer"
            >
              Calculator <i data-lucide="chevron-down" class="w-4 h-4"></i>
            </button>
            <div
              class="absolute top-full left-0 mt-2 bg-white rounded-lg min-w-[14rem] text-sm opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 pointer-events-auto border border-gray-300 shadow-md"
            >
              <a
                href="../calculators/sip-calculator.html"
                class="flex items-center gap-3 px-4 py-2 hover:bg-[#fcaf1b] hover:text-white rounded-t-lg cursor-pointer"
              >
                <i data-lucide="calculator" class="w-4 h-4"></i> SIP Calculator
              </a>
              <a
                href="../calculators/lump-sump-calculator.html"
                class="flex items-center gap-3 px-4 py-2 hover:bg-[#fcaf1b] hover:text-white cursor-pointer"
              >
                <i data-lucide="percent" class="w-4 h-4"></i> Lump Sum
              </a>
              <a
                href="../calculators/swp-calculator.html"
                class="flex items-center gap-3 px-4 py-2 hover:bg-[#fcaf1b] hover:text-white cursor-pointer"
              >
                <i data-lucide="activity" class="w-4 h-4"></i> SWP Calculator
              </a>
              <a
                href="../calculators/inflation-calculator.html"
                class="flex items-center gap-3 px-4 py-2 hover:bg-[#fcaf1b] hover:text-white rounded-b-lg cursor-pointer"
              >
                <i data-lucide="trending-up" class="w-4 h-4"></i> Inflation
                Calculator
              </a>
            </div>
          </div>

          <!-- Financial Literacy Dropdown -->
          <div class="relative group z-50">
            <button
              class="flex items-center gap-1 text-white hover:text-[#fcaf1b] transition cursor-pointer"
            >
              Financial Literacy
              <i data-lucide="chevron-down" class="w-4 h-4"></i>
            </button>
            <div
              class="absolute top-full left-0 mt-2 bg-white rounded-lg min-w-[14rem] text-sm opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 pointer-events-auto border border-gray-300 shadow-md"
            >
              <a
                href="#lit-1"
                class="flex items-center gap-3 px-4 py-2 hover:bg-[#fcaf1b] hover:text-white rounded-t-lg cursor-pointer"
              >
                <i data-lucide="book-open" class="w-4 h-4"></i> Basics
              </a>
              <a
                href="#lit-2"
                class="flex items-center gap-3 px-4 py-2 hover:bg-[#fcaf1b] hover:text-white cursor-pointer"
              >
                <i data-lucide="lightbulb" class="w-4 h-4"></i> Tips & Guides
              </a>
              <a
                href="#lit-3"
                class="flex items-center gap-3 px-4 py-2 hover:bg-[#fcaf1b] hover:text-white rounded-b-lg cursor-pointer"
              >
                <i data-lucide="play-circle" class="w-4 h-4"></i> Video Lessons
              </a>
            </div>
          </div>

          <!-- Additional navigation links -->
          <a
            href="#nri-corner"
            class="text-white hover:text-[#fcaf1b] transition"
            >NRI Corner</a
          >
          <a
            href="../contact-us.html"
            class="text-white hover:text-[#fcaf1b] transition"
            >Contact Us</a
          >
          <a href="#refer-us" class="text-white hover:text-[#fcaf1b] transition"
            >Refer Us</a
          >
        </nav>

        <!-- Call-to-Action Button - Desktop only -->
        <a
          href="#"
          class="hidden md:inline-flex items-center border border-transparent bg-[#fcaf1b] text-white pl-5 pr-3 py-2 rounded-full text-sm gap-3 group transition hover:opacity-90 hover:border-primary"
        >
          Get Free Assessment
          <span
            class="bg-white text-black rounded-full p-1.5 flex items-center justify-center transition-transform group-hover:translate-x-1"
          >
            <i data-lucide="arrow-right" class="w-4 h-4"></i>
          </span>
        </a>

        <!-- Mobile Menu Toggle Button -->
        <button
          id="menuToggle"
          class="md:hidden p-2 bg-gray-50 border border-gray-300 rounded-full hover:bg-gray-100 hover:cursor-pointer"
        >
          <i data-lucide="align-right" class="w-6 h-6 text-[#161f48]"></i>
        </button>
      </div>
    </header>

    <!-- Announcement Bar - Positioned below navbar -->
    <!-- <div
      class="fixed top-[72px] w-full h-12 bg-[#161f48] z-40 flex items-center justify-center px-4 text-sm"
    >
      <a href="#" class="flex items-center text-[#fcaf1b] hover:underline">
        Get a no cost, no commitment assessment
        <i data-lucide="arrow-right" class="w-5 h-5 ml-2"></i>
      </a>
      <a href="#" class="hidden lg:inline-flex items-center text-white mr-2">
        <span class="text-[#fcaf1b] mx-2">|</span> Celebrating 40 Years of Trust
      </a>
    </div> -->

    <!-- Mobile Menu Backdrop - Dark overlay when mobile menu is open -->
    <div
      id="backdrop"
      class="fixed inset-0 bg-black/20 backdrop-blur-sm z-40 hidden opacity-0 transition"
    ></div>

    <!-- =================================================================== -->
    <!-- MOBILE NAVIGATION MENU - Slide-in from right -->
    <!-- =================================================================== -->
    <div
      id="mobileMenu"
      class="md:hidden fixed top-0 right-0 h-full max-w-xs bg-white shadow-xl transform translate-x-full transition duration-300 z-50 flex flex-col justify-between overflow-y-auto"
    >
      <!-- Mobile menu content -->
      <div class="p-6 flex flex-col gap-4">
        <!-- Mobile menu header with logo and close button -->
        <div class="flex justify-between items-center mb-4">
          <img src="../assets/Logo.svg" class="h-10" alt="Logo" />
          <button
            id="closeMenu"
            class="p-2 bg-gray-50 text-[#161f48] border border-gray-300 rounded-full hover:bg-gray-100 hover:cursor-pointer"
          >
            <i data-lucide="x" class="w-6 h-6"></i>
          </button>
        </div>

        <!-- Mobile navigation links -->
        <a
          href="#about-us"
          class="flex items-center gap-2 px-4 py-3 rounded-lg hover:bg-gray-100 cursor-pointer"
        >
          <i data-lucide="info" class="w-4 h-4"></i> About Us
        </a>

        <!-- Mobile Services Accordion -->
        <details class="group">
          <summary
            class="flex justify-between items-center px-4 py-3 rounded-lg hover:bg-gray-100 cursor-pointer"
          >
            Services
            <i
              data-lucide="chevron-down"
              class="w-4 h-4 transition-transform group-open:rotate-180"
            ></i>
          </summary>
          <div class="pl-6 flex flex-col gap-4 mt-2 text-sm">
            <a
              href="#service-1"
              class="flex items-center gap-2 px-3 py-2 hover:bg-[#fcaf1b] hover:text-white cursor-pointer rounded-lg"
            >
              <i data-lucide="layers" class="w-4 h-4"></i> Mutual Funds
            </a>
            <a
              href="#service-2"
              class="flex items-center gap-2 px-3 py-2 hover:bg-[#fcaf1b] hover:text-white cursor-pointer rounded-lg"
            >
              <i data-lucide="calendar-check" class="w-4 h-4"></i> Retirement
              Planning
            </a>
            <a
              href="#service-3"
              class="flex items-center gap-2 px-3 py-2 hover:bg-[#fcaf1b] hover:text-white cursor-pointer rounded-lg"
            >
              <i data-lucide="file-text" class="w-4 h-4"></i> Tax Planning
            </a>
            <a
              href="#service-4"
              class="flex items-center gap-2 px-3 py-2 hover:bg-[#fcaf1b] hover:text-white cursor-pointer rounded-lg"
            >
              <i data-lucide="shield-check" class="w-4 h-4"></i> Insurance
              Planning
            </a>
            <a
              href="#service-5"
              class="flex items-center gap-2 px-3 py-2 hover:bg-[#fcaf1b] hover:text-white cursor-pointer rounded-lg"
            >
              <i data-lucide="archive" class="w-4 h-4"></i> Legacy Planning
            </a>
          </div>
        </details>

        <!-- Mobile Calculator Accordion -->
        <details class="group">
          <summary
            class="flex justify-between items-center px-4 py-3 rounded-lg hover:bg-gray-100 cursor-pointer"
          >
            Calculator
            <i
              data-lucide="chevron-down"
              class="w-4 h-4 transition-transform group-open:rotate-180"
            ></i>
          </summary>
          <div class="pl-6 flex flex-col gap-4 mt-2 text-sm">
            <a
              href="../calculators/sip-calculator.html"
              class="flex items-center gap-2 px-3 py-2 hover:bg-[#fcaf1b] hover:text-white cursor-pointer rounded-lg"
            >
              <i data-lucide="calculator" class="w-4 h-4"></i> SIP Calculator
            </a>
            <a
              href="../calculators/lump-sump-calculator.html"
              class="flex items-center gap-2 px-3 py-2 hover:bg-[#fcaf1b] hover:text-white cursor-pointer rounded-lg"
            >
              <i data-lucide="percent" class="w-4 h-4"></i> Lump Sum
            </a>

            <a
              href="../calculators/swp-calculator.html"
              class="flex items-center gap-2 px-3 py-2 hover:bg-[#fcaf1b] hover:text-white cursor-pointer rounded-lg"
            >
              <i data-lucide="activity" class="w-4 h-4"></i> SWP Calculator
            </a>
            <a
              href="../calculators/inflation-calculator.html"
              class="flex items-center gap-3 px-4 py-2 hover:bg-[#fcaf1b] hover:text-white rounded-lg cursor-pointer"
            >
              <i data-lucide="trending-up" class="w-4 h-4"></i> Inflation
              Calculator
            </a>
          </div>
        </details>

        <!-- Mobile Financial Literacy Accordion -->
        <details class="group">
          <summary
            class="flex justify-between items-center px-4 py-3 rounded-lg hover:bg-gray-100 cursor-pointer"
          >
            Financial Literacy
            <i
              data-lucide="chevron-down"
              class="w-4 h-4 transition-transform group-open:rotate-180"
            ></i>
          </summary>
          <div class="pl-6 flex flex-col gap-4 mt-2 text-sm">
            <a
              href="#lit-1"
              class="flex items-center gap-2 px-3 py-2 hover:bg-[#fcaf1b] hover:text-white cursor-pointer rounded-lg"
            >
              <i data-lucide="book-open" class="w-4 h-4"></i> Basics
            </a>
            <a
              href="#lit-2"
              class="flex items-center gap-2 px-3 py-2 hover:bg-[#fcaf1b] hover:text-white cursor-pointer rounded-lg"
            >
              <i data-lucide="lightbulb" class="w-4 h-4"></i> Tips & Guides
            </a>
            <a
              href="#lit-3"
              class="flex items-center gap-2 px-3 py-2 hover:bg-[#fcaf1b] hover:text-white cursor-pointer rounded-lg"
            >
              <i data-lucide="play-circle" class="w-4 h-4"></i> Video Lessons
            </a>
          </div>
        </details>

        <!-- Additional mobile navigation links -->
        <a
          href="#nri-corner"
          class="flex items-center gap-2 px-4 py-3 rounded-lg hover:bg-gray-100 cursor-pointer"
        >
          <i data-lucide="globe" class="w-4 h-4"></i> NRI Corner
        </a>
        <a
          href="../contact-us.html"
          class="flex items-center gap-2 px-4 py-3 rounded-lg hover:bg-gray-100 cursor-pointer"
        >
          <i data-lucide="phone-call" class="w-4 h-4"></i> Contact Us
        </a>
      </div>

      <!-- Mobile CTA button at bottom -->
      <div class="p-6">
        <a
          href="#"
          class="inline-flex items-center bg-[#fcaf1b] text-[#161f48] pl-5 pr-3 py-2 rounded-full text-sm gap-3 group transition hover:bg-[#161f48] hover:text-white"
        >
          Get Free Assessment
          <span
            class="bg-white text-black rounded-full p-1.5 flex items-center justify-center transition-transform group-hover:translate-x-1"
          >
            <i data-lucide="arrow-right" class="w-4 h-4"></i>
          </span>
        </a>
      </div>
    </div>

    <section
      class="w-full mx-auto max-w-[1110px] mt-8 p-5 lg:p-0 text-sm lg:text-base text-gray-900"
    >
      <h2 class="text-lg font-semibold mb-2">
        About the SWP (Systematic Withdrawal Plan) Calculator
      </h2>

      <p class="mb-4">
        This SWP Calculator is the best tool for planning a steady income stream
        from your investments. An SWP, or Systematic Withdrawal Plan, allows you
        to withdraw a fixed amount of money from your mutual fund investments at
        regular intervals. It's the perfect solution for retirees or anyone
        seeking a consistent income from a one-time lumpsum investment or a
        corpus built over a long time with SIP investments, all while allowing
        the remaining portfolio to potentially grow. Use this calculator to see
        how long your investments can last and how much of your principal will
        remain.
      </p>

      <h3 class="text-lg font-semibold mb-2">How to Use This Calculator</h3>
      <ul class="list-disc ml-6 mb-4 space-y-1 text-black">
        <li>
          <span class="font-semibold">Portfolio Value:</span> Enter the current
          lumpsum amount or the total value of your existing investment
          portfolio from which you wish to start your SWP.
        </li>
        <li>
          <span class="font-semibold">Monthly Withdrawal:</span> Input the fixed
          amount you wish to withdraw every month.
        </li>
        <li>
          <span class="font-semibold">Expected Rate of Return:</span> Enter the
          average annual return you anticipate on your investment (e.g., 8-10%
          for balanced funds).
        </li>
        <li>
          <span class="font-semibold">Time Period:</span> Specify the total
          number of years you plan to make withdrawals.
        </li>
        <li>
          After entering these details, the calculator will provide a detailed
          breakdown, showing you the total amount withdrawn and the estimated
          value of your remaining investment corpus.
        </li>
      </ul>

      <h3 class="text-lg font-semibold mb-2">Formula Used in the Calculator</h3>
      <p class="mb-4">
        Our calculator uses a standard financial formula to determine the value
        of your remaining corpus after a series of periodic withdrawals.
      </p>

      <p class="font-semibold mb-1">
        The remaining corpus (FV) is calculated using the future value of an
        annuity formula, in reverse:
      </p>

      <!-- MathJax script -->
      <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

      <div
        class="bg-gray-200/50 p-4 rounded-xl mt-4 text-sm overflow-x-auto mb-4"
      >
        <p><strong class="font-semibold">Main formula:</strong></p>
        $$\mathbf{FV} = \mathbf{P} \times (1 + r)^{t} \;-\; \mathbf{W} \times
        \frac{r \times \left( (1 + r)^{t} - 1 \right)}{r}$$

        <p><strong class="font-semibold">Where:</strong></p>
        <ul>
          <li>\(\mathbf{FV}\) = Final Corpus Value</li>
          <li>\(\mathbf{P}\) = Portfolio Value (Current)</li>
          <li>\(r\) = Periodic Rate of Return (Annual Rate ÷ 12)</li>
          <li>\(t\) = Total Number of Withdrawals (Years × 12)</li>
          <li>\(\mathbf{W}\) = Periodic Withdrawal Amount</li>
        </ul>
      </div>

      <p class="mb-4">
        This formula accounts for both the growth of the remaining principal and
        the reduction of the corpus due to your withdrawals.
      </p>

      <h3 class="text-lg font-semibold mb-2">
        Case Study: A Practical Example of SWP in Action
      </h3>

      <p class="mb-4">
        Mr. Kamat, a 60-year-old retiree, has a portfolio value of ₹1 Crore. He
        wants to generate a steady monthly income of ₹60,000 to cover his living
        expenses in retirement. He keeps his portfolio invested in moderately
        conservative/balanced funds while expecting an average annual return of
        9%. He plans to continue this withdrawal for the next 10 years.
      </p>

      <ul class="list-disc list-inside mb-6 font-medium">
        <li>
          <span class="font-semibold">Portfolio Value (Current):</span>
          ₹1,00,00,000
        </li>
        <li>
          <span class="font-semibold">Withdrawal Amount:</span> ₹60,000 per
          month
        </li>
        <li>
          <span class="font-semibold">Expected Rate of Return:</span> 9% per
          annum
        </li>
        <li><span class="font-semibold">Time Period:</span> 10 years</li>
      </ul>

      <p class="mb-6">
        Below is an illustration of the year-on-year withdrawals and estimated
        balance corpus value:
      </p>

      <table class="w-full border border-gray-300 text-left mb-6 bg-white">
        <thead>
          <tr class="bg-white font-semibold">
            <th
              class="border border-gray-300 px-4 py-2 font-semibold rounded-tl-lg"
            >
              Year
            </th>
            <th class="border border-gray-300 px-4 py-2 font-semibold">
              Amount Withdrawn (₹)
            </th>
            <th
              class="border border-gray-300 px-4 py-2 font-semibold rounded-tr-lg"
            >
              Value of Balance Corpus (₹)
            </th>
          </tr>
        </thead>

        <tbody class="bg-white">
          <tr>
            <td class="border border-gray-300 px-4 py-2">1</td>
            <td class="border border-gray-300 px-4 py-2">7,20,000</td>
            <td class="border border-gray-300 px-4 py-2">97,08,000</td>
          </tr>
          <tr>
            <td class="border border-gray-300 px-4 py-2">2</td>
            <td class="border border-gray-300 px-4 py-2">7,20,000</td>
            <td class="border border-gray-300 px-4 py-2">94,38,720</td>
          </tr>
          <tr>
            <td class="border border-gray-300 px-4 py-2">3</td>
            <td class="border border-gray-300 px-4 py-2">7,20,000</td>
            <td class="border border-gray-300 px-4 py-2">91,90,205</td>
          </tr>
          <tr>
            <td class="border border-gray-300 px-4 py-2">4</td>
            <td class="border border-gray-300 px-4 py-2">7,20,000</td>
            <td class="border border-gray-300 px-4 py-2">89,60,324</td>
          </tr>
          <tr>
            <td class="border border-gray-300 px-4 py-2">5</td>
            <td class="border border-gray-300 px-4 py-2">7,20,000</td>
            <td class="border border-gray-300 px-4 py-2">87,47,661</td>
          </tr>
          <tr>
            <td class="border border-gray-300 px-4 py-2">6</td>
            <td class="border border-gray-300 px-4 py-2">7,20,000</td>
            <td class="border border-gray-300 px-4 py-2">85,50,712</td>
          </tr>
          <tr>
            <td class="border border-gray-300 px-4 py-2">7</td>
            <td class="border border-gray-300 px-4 py-2">7,20,000</td>
            <td class="border border-gray-300 px-4 py-2">83,68,914</td>
          </tr>
          <tr>
            <td class="border border-gray-300 px-4 py-2">8</td>
            <td class="border border-gray-300 px-4 py-2">7,20,000</td>
            <td class="border border-gray-300 px-4 py-2">81,99,741</td>
          </tr>
          <tr>
            <td class="border border-gray-300 px-4 py-2">9</td>
            <td class="border border-gray-300 px-4 py-2">7,20,000</td>
            <td class="border border-gray-300 px-4 py-2">80,42,692</td>
          </tr>
          <tr>
            <td class="border border-gray-300 px-4 py-2">10</td>
            <td class="border border-gray-300 px-4 py-2">7,20,000</td>
            <td class="border border-gray-300 px-4 py-2">78,96,276</td>
          </tr>

          <tr class="font-semibold">
            <td class="border border-gray-300 px-4 py-2">Total</td>
            <td class="border border-gray-300 px-4 py-2">₹72,00,000</td>
            <td class="border border-gray-300 px-4 py-2">₹78,96,276</td>
          </tr>
        </tbody>
      </table>

      <p>
        This case demonstrates how an SWP can provide a regular income while
        also preserving a significant portion of the principal.
      </p>
    </section>

    <!-- SWP FAQ Section -->
    <section
      id="faq-swp"
      class="mb-2 bg-transparent p-5 max-w-[1150px] mx-auto"
    >
      <div class="text-start mb-8">
        <h2 class="text-base font-semibold leading-tight text-black">
          Top 10 Commonly Asked Questions about SWP
        </h2>
      </div>

      <div
        class="bg-white text-black border border-gray-300 rounded-2xl shadow-sm divide-y divide-gray-200"
      >
        <!-- FAQ 1 -->
        <div class="faq-item">
          <button
            class="faq-question w-full px-8 py-6 flex justify-between items-center text-left transition-colors duration-200 focus:outline-none"
            aria-expanded="false"
          >
            <span class="text-base font-medium text-black pr-4">
              What is an SWP?
            </span>
            <svg
              class="faq-icon w-6 h-6 text-gray-500 hover:text-gray-800 transform transition-transform duration-300"
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              stroke="currentColor"
              stroke-width="1.5"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <path d="M5 12h14" />
              <path d="M12 5v14" />
            </svg>
          </button>
          <div
            class="faq-answer max-h-0 overflow-hidden transition-all duration-500 ease-in-out"
          >
            <div class="px-8 pb-6 text-gray-700 leading-relaxed text-sm">
              An SWP, or Systematic Withdrawal Plan, is a facility offered by
              mutual funds that allows investors to withdraw a fixed amount of
              money from their investment at a predetermined frequency, such as
              monthly, quarterly, or annually.
            </div>
          </div>
        </div>

        <!-- FAQ 2 -->
        <div class="faq-item">
          <button
            class="faq-question w-full px-8 py-6 flex justify-between items-center text-left transition-colors duration-200 focus:outline-none"
            aria-expanded="false"
          >
            <span class="text-base font-medium text-black pr-4">
              Who should consider an SWP?
            </span>
            <svg
              class="faq-icon w-6 h-6 text-gray-500 hover:text-gray-800 transform transition-transform duration-300"
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              stroke="currentColor"
              stroke-width="1.5"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <path d="M5 12h14" />
              <path d="M12 5v14" />
            </svg>
          </button>
          <div
            class="faq-answer max-h-0 overflow-hidden transition-all duration-500 ease-in-out"
          >
            <div class="px-8 pb-6 text-gray-700 leading-relaxed text-sm">
              SWPs are ideal for individuals who have an existing lumpsum
              investment and require a regular income stream. It is particularly
              popular among retirees, who use it to supplement or create a
              pension-like income from their retirement corpus.
            </div>
          </div>
        </div>

        <!-- FAQ 3 -->
        <div class="faq-item">
          <button
            class="faq-question w-full px-8 py-6 flex justify-between items-center text-left transition-colors duration-200 focus:outline-none"
            aria-expanded="false"
          >
            <span class="text-base font-medium text-black pr-4">
              Which is better, SIP or SWP?
            </span>
            <svg
              class="faq-icon w-6 h-6 text-gray-500 hover:text-gray-800 transform transition-transform duration-300"
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              stroke="currentColor"
              stroke-width="1.5"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <path d="M5 12h14" />
              <path d="M12 5v14" />
            </svg>
          </button>
          <div
            class="faq-answer max-h-0 overflow-hidden transition-all duration-500 ease-in-out"
          >
            <div class="px-8 pb-6 text-gray-700 leading-relaxed text-sm">
              Both are different products and have different purposes. A SIP is
              a method of investing money regularly to build wealth. An SWP is a
              method of withdrawing money regularly from an already-built
              corpus. Think of a SIP as a savings tool and an SWP as an
              income-generating tool.
            </div>
          </div>
        </div>

        <!-- FAQ 4 -->
        <div class="faq-item">
          <button
            class="faq-question w-full px-8 py-6 flex justify-between items-center text-left transition-colors duration-200 focus:outline-none"
            aria-expanded="false"
          >
            <span class="text-base font-medium text-black pr-4">
              What are the key advantages of SWP?
            </span>
            <svg
              class="faq-icon w-6 h-6 text-gray-500 hover:text-gray-800 transform transition-transform duration-300"
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              stroke="currentColor"
              stroke-width="1.5"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <path d="M5 12h14" />
              <path d="M12 5v14" />
            </svg>
          </button>
          <div
            class="faq-answer max-h-0 overflow-hidden transition-all duration-500 ease-in-out"
          >
            <div
              class="px-8 pb-6 text-gray-700 leading-relaxed text-sm space-y-2"
            >
              <p>
                Here are some key benefits of the systematic withdrawal plan
                (SWP):
              </p>
              <ul class="list-disc ml-6 space-y-1">
                <li>
                  Provides regular income like a steady salary, helping cover
                  routine expenses.
                </li>
                <li>
                  Flexible withdrawal amounts and periodicity that can be
                  changed as per needs.
                </li>
                <li>
                  More tax efficient since only the return component is taxed;
                  principal is not.
                </li>
                <li>No lock-in period to worry about.</li>
                <li>
                  The remaining corpus continues to earn returns, prolonging
                  your SWP tenure.
                </li>
              </ul>
            </div>
          </div>
        </div>

        <!-- FAQ 5 -->
        <div class="faq-item">
          <button
            class="faq-question w-full px-8 py-6 flex justify-between items-center text-left transition-colors duration-200 focus:outline-none"
            aria-expanded="false"
          >
            <span class="text-base font-medium text-black pr-4">
              Is the SWP withdrawal amount taxed?
            </span>
            <svg
              class="faq-icon w-6 h-6 text-gray-500 hover:text-gray-800 transform transition-transform duration-300"
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              stroke="currentColor"
              stroke-width="1.5"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <path d="M5 12h14" />
              <path d="M12 5v14" />
            </svg>
          </button>
          <div
            class="faq-answer max-h-0 overflow-hidden transition-all duration-500 ease-in-out"
          >
            <div class="px-8 pb-6 text-gray-700 leading-relaxed text-sm">
              Yes, the withdrawals are subject to capital gains tax. Equity fund
              withdrawals after one year are considered long-term capital gains
              (tax-efficient). For debt funds, tax is based on your slab after
              three years.
            </div>
          </div>
        </div>

        <!-- FAQ 6 -->
        <div class="faq-item">
          <button
            class="faq-question w-full px-8 py-6 flex justify-between items-center text-left transition-colors duration-200 focus:outline-none"
            aria-expanded="false"
          >
            <span class="text-base font-medium text-black pr-4">
              What are the Tax implications of systematic withdrawal plans?
            </span>
            <svg
              class="faq-icon w-6 h-6 text-gray-500 hover:text-gray-800 transform transition-transform duration-300"
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              stroke="currentColor"
              stroke-width="1.5"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <path d="M5 12h14" />
              <path d="M12 5v14" />
            </svg>
          </button>
          <div
            class="faq-answer max-h-0 overflow-hidden transition-all duration-500 ease-in-out"
          >
            <div
              class="px-8 pb-6 text-gray-700 leading-relaxed text-sm space-y-2"
            >
              <p><strong>Equity funds:</strong></p>
              <ul class="list-disc ml-6">
                <li>
                  Units held for more than 1 year: Taxed as long-term capital
                  gains (LTCG). LTCG up to ₹1.25 lakh is tax-exempt; beyond
                  that, 12.5% tax applies.
                </li>
                <li>
                  Units held for less than 1 year: Taxed as short-term capital
                  gains at 20% with no exemptions.
                </li>
              </ul>
              <p class="mt-2"><strong>Debt funds:</strong></p>
              <p>
                Taxed as short-term capital gains as per the investor's income
                tax slab, regardless of holding period.
              </p>
            </div>
          </div>
        </div>

        <!-- FAQ 7 -->
        <div class="faq-item">
          <button
            class="faq-question w-full px-8 py-6 flex justify-between items-center text-left transition-colors duration-200 focus:outline-none"
            aria-expanded="false"
          >
            <span class="text-base font-medium text-black pr-4">
              Can I stop or modify my SWP?
            </span>
            <svg
              class="faq-icon w-6 h-6 text-gray-500 hover:text-gray-800 transform transition-transform duration-300"
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              stroke="currentColor"
              stroke-width="1.5"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <path d="M5 12h14" />
              <path d="M12 5v14" />
            </svg>
          </button>
          <div
            class="faq-answer max-h-0 overflow-hidden transition-all duration-500 ease-in-out"
          >
            <div class="px-8 pb-6 text-gray-700 leading-relaxed text-sm">
              Yes, you have full control over your SWP. You can stop or modify
              the withdrawal amount and frequency at any time by simply
              submitting a request to the mutual fund house.
            </div>
          </div>
        </div>

        <!-- FAQ 8 -->
        <div class="faq-item">
          <button
            class="faq-question w-full px-8 py-6 flex justify-between items-center text-left transition-colors duration-200 focus:outline-none"
            aria-expanded="false"
          >
            <span class="text-base font-medium text-black pr-4">
              Is the calculated corpus guaranteed?
            </span>
            <svg
              class="faq-icon w-6 h-6 text-gray-500 hover:text-gray-800 transform transition-transform duration-300"
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              stroke="currentColor"
              stroke-width="1.5"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <path d="M5 12h14" />
              <path d="M12 5v14" />
            </svg>
          </button>
          <div
            class="faq-answer max-h-0 overflow-hidden transition-all duration-500 ease-in-out"
          >
            <div class="px-8 pb-6 text-gray-700 leading-relaxed text-sm">
              No, the calculated values are estimates based on your provided
              inputs for the expected rate of return. Mutual fund investments
              are subject to market risks, and actual returns may vary. This
              calculator is a planning tool and should not be considered a
              guarantee of returns.
            </div>
          </div>
        </div>

        <!-- FAQ 9 -->
        <div class="faq-item">
          <button
            class="faq-question w-full px-8 py-6 flex justify-between items-center text-left transition-colors duration-200 focus:outline-none"
            aria-expanded="false"
          >
            <span class="text-base font-medium text-black pr-4">
              What happens if the market falls?
            </span>
            <svg
              class="faq-icon w-6 h-6 text-gray-500 hover:text-gray-800 transform transition-transform duration-300"
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              stroke="currentColor"
              stroke-width="1.5"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <path d="M5 12h14" />
              <path d="M12 5v14" />
            </svg>
          </button>
          <div
            class="faq-answer max-h-0 overflow-hidden transition-all duration-500 ease-in-out"
          >
            <div class="px-8 pb-6 text-gray-700 leading-relaxed text-sm">
              If the market falls, your withdrawals will still happen, but at a
              reduced Net Asset Value (NAV). This means you will have to sell
              more units of your fund to get the same withdrawal amount, which
              could deplete your corpus faster. For this reason, many investors
              prefer to have a buffer or a slightly lower withdrawal rate.
            </div>
          </div>
        </div>

        <!-- FAQ 10 -->
        <div class="faq-item">
          <button
            class="faq-question w-full px-8 py-6 flex justify-between items-center text-left transition-colors duration-200 focus:outline-none"
            aria-expanded="false"
          >
            <span class="text-base font-medium text-black pr-4">
              Is SWP a good retirement strategy?
            </span>
            <svg
              class="faq-icon w-6 h-6 text-gray-500 hover:text-gray-800 transform transition-transform duration-300"
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              stroke="currentColor"
              stroke-width="1.5"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <path d="M5 12h14" />
              <path d="M12 5v14" />
            </svg>
          </button>
          <div
            class="faq-answer max-h-0 overflow-hidden transition-all duration-500 ease-in-out"
          >
            <div class="px-8 pb-6 text-gray-700 leading-relaxed text-sm">
              Yes, SWP is a good retirement strategy as it allows you to draw
              regular income from your investments. Additionally, unlike
              dividends or interests, an SWP withdraws both returns and
              principal, making it more tax efficient as only the return portion
              is taxable and not the principal.
            </div>
          </div>
        </div>
      </div>
    </section>

    <script>
      document.querySelectorAll(".faq-item").forEach((item) => {
        const btn = item.querySelector(".faq-question");
        const answer = item.querySelector(".faq-answer");
        const icon = item.querySelector(".faq-icon");

        btn.addEventListener("click", () => {
          const isOpen = btn.getAttribute("aria-expanded") === "true";

          // Close all other answers (optional, for accordion style)
          document.querySelectorAll(".faq-item").forEach((otherItem) => {
            if (otherItem !== item) {
              otherItem.querySelector(".faq-answer").style.maxHeight = null;
              otherItem
                .querySelector(".faq-question")
                .setAttribute("aria-expanded", "false");
              otherItem
                .querySelector(".faq-icon")
                .classList.remove("rotate-45");
            }
          });

          if (isOpen) {
            answer.style.maxHeight = null;
            btn.setAttribute("aria-expanded", "false");
            icon.classList.remove("rotate-45");
          } else {
            answer.style.maxHeight = answer.scrollHeight + "px";
            btn.setAttribute("aria-expanded", "true");
            icon.classList.add("rotate-45");
          }
        });
      });
    </script>

    <section class="py-10 px-5 max-w-8xl mx-auto text-center">
      <h2 class="text-xl font-semibold mb-8 text-black">
        Explore More Popular Calculators
      </h2>

      <div class="grid grid-cols-1 lg:grid-cols-3 gap-2 lg:gap-6">
        <a
          href="./sip-calculator.html"
          class="inline-flex items-center justify-center bg-white text-black pl-5 pr-3 py-3.5 border border-gray-300 rounded-full text-sm gap-3 group transition hover:bg-[#161f48] hover:text-white hover:border-transparent"
        >
          <i
            data-lucide="calculator"
            class="w-5 h-5 text-black group-hover:text-white"
          ></i>
          SIP Calculator
        </a>

        <a
          href="./inflation-calculator.html"
          class="inline-flex items-center justify-center bg-white text-black px-5 py-3.5 border border-gray-300 rounded-full text-sm gap-3 group transition hover:bg-[#161f48] hover:text-white hover:border-transparent"
        >
          <i
            data-lucide="trending-up"
            class="w-5 h-5 text-black group-hover:text-white"
          ></i>
          Inflation Calculator
        </a>
        <a
          href="./lump-sump-calculator.html"
          class="inline-flex items-center justify-center bg-white text-black pl-5 pr-4 py-3.5 border border-gray-300 rounded-full text-sm gap-3 group transition hover:bg-[#161f48] hover:text-white hover:border-transparent"
        >
          <i
            data-lucide="percent"
            class="w-5 h-5 text-black group-hover:text-white"
          ></i>
          Lump Sump Calculator
        </a>
      </div>
    </section>

    <!-- FOOTER SECTION - Company information and links -->
    <!-- =================================================================== -->
    <footer class="w-full bg-white border-t border-gray-200">
      <!-- Top Nav Links -->
      <div
        class="max-w-7xl mx-auto px-6 py-6 flex flex-wrap justify-center md:justify-between gap-6 text-sm text-gray-700"
      >
        <a href="/about" class="hover:text-[#fcaf1b] transition">About Us</a>
        <a href="/services" class="hover:text-[#fcaf1b] transition">Services</a>
        <a href="/calculators" class="hover:text-[#fcaf1b] transition"
          >Calculators</a
        >
        <a href="/financial-literacy" class="hover:text-[#fcaf1b] transition"
          >Financial Literacy</a
        >
        <a href="/nri-corner" class="hover:text-[#fcaf1b] transition"
          >NRI Corner</a
        >
        <a href="/contact" class="hover:text-[#fcaf1b] transition"
          >Contact Us</a
        >
      </div>

      <!-- Middle Section -->
      <div
        class="max-w-7xl mx-auto px-6 py-10 grid grid-cols-1 md:grid-cols-3 gap-8 text-center md:text-left"
      >
        <!-- Left: Info -->
        <div class="space-y-4">
          <a
            href="https://www.google.com/maps/dir/?api=1&destination=15.4038977,74.0086659"
            target="_blank"
            rel="noopener"
            class="flex items-center justify-center md:justify-start gap-2 text-gray-800"
          >
            <i data-lucide="map-pin" class="w-5 h-5 text-[#fcaf1b]"></i> Our
            Office
          </a>
          <a
            href="mailto:invest@chimulkar.com"
            class="flex items-center justify-center md:justify-start gap-2 text-gray-800"
          >
            <i data-lucide="mail" class="w-5 h-5 text-[#fcaf1b]"></i>
            invest@chimulkar.com
          </a>
          <a
            href="tel:+918208031927"
            class="flex items-center justify-center md:justify-start gap-2 text-gray-800"
          >
            <i data-lucide="phone" class="w-5 h-5 text-[#fcaf1b]"></i>
            +91 82080 31927
          </a>
        </div>

        <!-- Center: Logo -->
        <div class="flex flex-col items-center">
          <img
            src="../assets/Logo.svg"
            alt="Chimulkar Financial Services"
            class="w-40 h-auto mb-4"
          />
          <p class="text-gray-800 text-sm">Chimulkar Financial Services</p>
        </div>

        <!-- Right: Reviews & Social -->
        <div class="flex flex-col items-center md:items-end space-y-4">
          <p class="text-gray-800">10+ Five-Star Google Reviews</p>
          <div class="flex gap-1">
            <i
              data-lucide="star"
              class="w-5 h-5 fill-yellow-400 text-yellow-400"
            ></i>
            <i
              data-lucide="star"
              class="w-5 h-5 fill-yellow-400 text-yellow-400"
            ></i>
            <i
              data-lucide="star"
              class="w-5 h-5 fill-yellow-400 text-yellow-400"
            ></i>
            <i
              data-lucide="star"
              class="w-5 h-5 fill-yellow-400 text-yellow-400"
            ></i>
            <i
              data-lucide="star"
              class="w-5 h-5 fill-yellow-400 text-yellow-400"
            ></i>
          </div>
          <div class="flex gap-4">
            <a
              href="https://www.instagram.com/chimulkarfinancialservices?utm_source=ig_web_button_share_sheet&igsh=MWZxMnFsZTY4OHNmeg=="
              target="_blank"
              aria-label="Instagram"
              class="bg-yellow-100 rounded-full p-2 hover:bg-yellow-200 transition"
            >
              <i data-lucide="instagram" class="w-5 h-5 text-gray-800"></i>
            </a>
            <a
              href="https://www.youtube.com/@ChimulkarFinancialServices"
              target="_blank"
              aria-label="YouTube"
              rel="noopener noreferrer"
              class="bg-yellow-100 rounded-full p-2 hover:bg-yellow-200 transition"
            >
              <i data-lucide="youtube" class="w-5 h-5 text-gray-800"></i>
            </a>
          </div>
        </div>
      </div>

      <!-- Bottom Bar -->
      <div class="bg-[#161f48] text-gray-100 text-xs text-center py-4">
        <div
          class="max-w-7xl mx-auto px-6 flex flex-col md:flex-row justify-between items-center gap-2"
        >
          <p>© 2025 Chimulkar Financial Services | Financial Consultant</p>
          <div class="flex gap-4">
            <a href="/terms" class="hover:underline">Terms & Conditions</a>
            <a href="/privacy-policy" class="hover:underline">Privacy Policy</a>
            <a href="/sitemap" class="hover:underline">Sitemap</a>
          </div>
          <p class="text-gray-400">
            Designed & Developed by
            <a
              href="https://github.com/Niraj-Paswan"
              target="_blank"
              class="text-white hover:underline"
              >~Niraj Paswan</a
            >
          </p>
        </div>
      </div>
    </footer>
    <!-- Main calculator container with an ID for html2canvas -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <script>
      lucide.createIcons();
    </script>
    <script>
      // ===================================================================
      // MOBILE MENU FUNCTIONALITY
      // ===================================================================

      // Get mobile menu elements
      const mobileMenuToggle = document.getElementById("menuToggle");
      const mobileMenuClose = document.getElementById("closeMenu");
      const mobileMenuPanel = document.getElementById("mobileMenu");
      const mobileMenuBackdrop = document.getElementById("backdrop");

      // Open mobile menu function
      function openMobileMenu() {
        mobileMenuPanel.classList.remove("translate-x-full");
        mobileMenuBackdrop.classList.remove("hidden");
        setTimeout(() => mobileMenuBackdrop.classList.remove("opacity-0"), 10);
      }

      // Close mobile menu function
      function closeMobileMenu() {
        mobileMenuPanel.classList.add("translate-x-full");
        mobileMenuBackdrop.classList.add("opacity-0");
        setTimeout(() => mobileMenuBackdrop.classList.add("hidden"), 300);
      }

      // Event listeners for mobile menu
      mobileMenuToggle.addEventListener("click", openMobileMenu);
      mobileMenuClose.addEventListener("click", closeMobileMenu);
      mobileMenuBackdrop.addEventListener("click", closeMobileMenu);

      // ===================================================================
      // HERO VIDEO POPUP FUNCTIONALITY
      // ===================================================================

      // Get video popup elements
      const heroPlayButton = document.getElementById("openPopup");
      const heroCloseButton = document.getElementById("closePopup");
      const heroVideoPopup = document.getElementById("videoPopup");
      const heroYoutubeFrame = document.getElementById("youtubeFrame");
    </script>
    <script>
      let chart;
      let isMonthlyMode = true; // Default to Monthly SWP
      let inflationEnabled = false; // Default inflation disabled

      // Global variables to store latest calculated results
      let lastCalculatedResults = {
        initialInvestment: 0,
        totalWithdrawn: 0,
        finalBalance: 0,
        withdrawalAmount: 0,
        sustainability: "Sustainable",
      };

      // Initialize chart
      function initChart() {
        const ctx = document.getElementById("swpChart").getContext("2d");
        chart = new Chart(ctx, {
          type: "doughnut",
          data: {
            labels: ["Total Withdrawn", "Remaining Balance"],
            datasets: [
              {
                data: [1200000, 850000], // Initial data
                backgroundColor: [
                  "#d1d5db", // Light grey for withdrawn amount
                  "#161f48", // Secondary color for remaining balance
                ],
                borderColor: "white",
                borderWidth: 2,
                cutout: "80%",
              },
            ],
          },
          options: {
            responsive: true,
            maintainAspectRatio: true,
            plugins: {
              legend: {
                display: false, // Custom legend handled in HTML
              },
              tooltip: {
                enabled: true,
                callbacks: {
                  label: function (context) {
                    let label = context.label || "";
                    if (label) {
                      label += ": ";
                    }
                    if (context.parsed !== null) {
                      label += formatCurrency(context.parsed);
                    }
                    return label;
                  },
                },
              },
            },
            animation: {
              animateRotate: true,
              duration: 800,
              easing: "easeOutQuart",
            },
          },
        });
      }

      // Format number to Indian currency format (Lakhs, Crores)
      function formatCurrency(amount) {
        if (amount >= 10000000) {
          return "₹" + (amount / 10000000).toFixed(2) + " Crores";
        } else if (amount >= 100000) {
          return "₹" + (amount / 100000).toFixed(2) + " Lakhs";
        } else {
          return "₹" + Math.round(amount).toLocaleString("en-IN");
        }
      }

      // Formats a number with Indian comma system for input fields
      function formatNumberWithIndianCommas(num) {
        if (isNaN(num) || num === null) return "";
        return Number(num).toLocaleString("en-IN", {
          maximumFractionDigits: 0,
        });
      }

      // Parses an Indian-formatted string back to a number
      function parseIndianFormattedNumber(str) {
        if (!str) return 0;
        return parseFloat(str.replace(/[^0-9.]/g, ""));
      }

      // Calculate SWP
      function calculateSWP() {
        const initialInvestment = parseIndianFormattedNumber(
          document.getElementById("investmentInput").value
        );
        const withdrawalAmount = parseIndianFormattedNumber(
          document.getElementById("withdrawalInput").value
        );
        const annualReturn = parseFloat(
          document.getElementById("returnInput").value
        );
        const years = parseInt(document.getElementById("timeInput").value);
        const inflationRate = parseFloat(
          document.getElementById("inflationInput").value
        );

        // Convert to monthly values
        const monthlyReturn = annualReturn / 100 / 12;
        const totalMonths = years * 12;
        let currentBalance = initialInvestment;
        let totalWithdrawn = 0;
        let monthlyWithdrawal = isMonthlyMode
          ? withdrawalAmount
          : withdrawalAmount / 12;

        // Apply inflation adjustment if enabled
        if (inflationEnabled) {
          const monthlyInflation = inflationRate / 100 / 12;
          // Calculate inflation-adjusted withdrawal for the period
          for (let month = 1; month <= totalMonths; month++) {
            if (currentBalance <= 0) break;

            // Apply return
            currentBalance = currentBalance * (1 + monthlyReturn);

            // Calculate inflation-adjusted withdrawal for this month
            const inflationAdjustedWithdrawal =
              monthlyWithdrawal * Math.pow(1 + monthlyInflation, month - 1);

            // Withdraw amount
            if (currentBalance >= inflationAdjustedWithdrawal) {
              currentBalance -= inflationAdjustedWithdrawal;
              totalWithdrawn += inflationAdjustedWithdrawal;
            } else {
              totalWithdrawn += currentBalance;
              currentBalance = 0;
              break;
            }
          }
        } else {
          // Simple calculation without inflation
          for (let month = 1; month <= totalMonths; month++) {
            if (currentBalance <= 0) break;

            // Apply return
            currentBalance = currentBalance * (1 + monthlyReturn);

            // Withdraw amount
            if (currentBalance >= monthlyWithdrawal) {
              currentBalance -= monthlyWithdrawal;
              totalWithdrawn += monthlyWithdrawal;
            } else {
              totalWithdrawn += currentBalance;
              currentBalance = 0;
              break;
            }
          }
        }

        const finalBalance = Math.max(0, currentBalance);
        const sustainability =
          finalBalance > 0 ? "Sustainable" : "Not Sustainable";

        // Store results
        lastCalculatedResults = {
          initialInvestment,
          totalWithdrawn,
          finalBalance,
          withdrawalAmount: isMonthlyMode ? withdrawalAmount : withdrawalAmount,
          sustainability,
        };

        updateResults();
      }

      // Update results display
      function updateResults() {
        const results = lastCalculatedResults;

        document.getElementById("initialInvestmentResult").textContent =
          formatCurrency(results.initialInvestment);
        document.getElementById("totalWithdrawn").textContent = formatCurrency(
          results.totalWithdrawn
        );
        document.getElementById("finalBalance").textContent = formatCurrency(
          results.finalBalance
        );
        document.getElementById("finalBalanceCenter").textContent =
          formatCurrency(results.finalBalance);
        document.getElementById("withdrawalAmount").textContent =
          formatCurrency(results.withdrawalAmount);

        // Update sustainability with color coding
        const sustainabilityElement = document.getElementById("sustainability");
        sustainabilityElement.textContent = results.sustainability;
        sustainabilityElement.style.color =
          results.sustainability === "Sustainable" ? "#fcaf1b" : "#ef4444";

        // Update chart data
        chart.data.datasets[0].data = [
          results.totalWithdrawn,
          results.finalBalance,
        ];
        chart.update("active");
      }

      // Toggle between modes (Monthly vs Yearly)
      function toggleMode(monthlyMode) {
        isMonthlyMode = monthlyMode;
        const monthlyBtn = document.getElementById("monthlyModeBtn");
        const yearlyBtn = document.getElementById("yearlyModeBtn");
        const withdrawalLabel = document.getElementById("withdrawalLabel");
        const withdrawalPeriodLabel = document.getElementById(
          "withdrawalPeriodLabel"
        );
        const withdrawalInput = document.getElementById("withdrawalInput");
        const withdrawalSlider = document.getElementById("withdrawalSlider");
        const withdrawalMinLabel =
          document.getElementById("withdrawalMinLabel");
        const withdrawalMaxLabel =
          document.getElementById("withdrawalMaxLabel");

        if (monthlyMode) {
          monthlyBtn.classList.add("bg-white", "text-gray-800", "shadow-sm");
          monthlyBtn.classList.remove("text-gray-600", "hover:bg-gray-200");
          yearlyBtn.classList.remove("bg-white", "text-gray-800", "shadow-sm");
          yearlyBtn.classList.add("text-gray-600", "hover:bg-gray-200");

          withdrawalLabel.textContent = "Monthly Withdrawal";
          withdrawalPeriodLabel.textContent = "Monthly Withdrawal";
          withdrawalInput.value = formatNumberWithIndianCommas(10000);
          withdrawalSlider.value = "10000";
          withdrawalSlider.min = "1000";
          withdrawalSlider.max = "1000000";
          withdrawalMinLabel.textContent = "₹1K";
          withdrawalMaxLabel.textContent = "₹10L";
        } else {
          yearlyBtn.classList.add("bg-white", "text-gray-800", "shadow-sm");
          yearlyBtn.classList.remove("text-gray-600", "hover:bg-gray-200");
          monthlyBtn.classList.remove("bg-white", "text-gray-800", "shadow-sm");
          monthlyBtn.classList.add("text-gray-600", "hover:bg-gray-200");

          withdrawalLabel.textContent = "Yearly Withdrawal";
          withdrawalPeriodLabel.textContent = "Yearly Withdrawal";
          withdrawalInput.value = formatNumberWithIndianCommas(120000);
          withdrawalSlider.value = "120000";
          withdrawalSlider.min = "12000";
          withdrawalSlider.max = "12000000";
          withdrawalMinLabel.textContent = "₹12K";
          withdrawalMaxLabel.textContent = "₹1.2Cr";
        }

        calculateSWP();
      }

      // Toggle inflation adjustment
      function toggleInflation() {
        inflationEnabled = document.getElementById("inflationToggle").checked;
        const inflationRateSection = document.getElementById(
          "inflationRateSection"
        );

        if (inflationEnabled) {
          inflationRateSection.style.display = "block";
        } else {
          inflationRateSection.style.display = "none";
        }

        calculateSWP();
      }

      // Function to generate email content
      function sendEmailPlan() {
        const subject = encodeURIComponent("My SWP Calculator Plan");
        let body = `Hello,\n\nHere is my SWP calculation plan:\n\n`;

        body += `Mode: ${isMonthlyMode ? "Monthly" : "Yearly"} SWP\n`;
        body += `Initial Investment: ${formatCurrency(
          lastCalculatedResults.initialInvestment
        )}\n`;
        body += `${
          isMonthlyMode ? "Monthly" : "Yearly"
        } Withdrawal: ${formatCurrency(
          lastCalculatedResults.withdrawalAmount
        )}\n`;
        body += `Expected Return Rate: ${
          document.getElementById("returnInput").value
        }%\n`;
        body += `Withdrawal Period: ${
          document.getElementById("timeInput").value
        } Years\n`;

        if (inflationEnabled) {
          body += `Expected Inflation: ${
            document.getElementById("inflationInput").value
          }%\n`;
        }

        body += `\n--- Results ---\n`;
        body += `Initial Investment: ${formatCurrency(
          lastCalculatedResults.initialInvestment
        )}\n`;
        body += `Total Withdrawn: ${formatCurrency(
          lastCalculatedResults.totalWithdrawn
        )}\n`;
        body += `Final Balance: ${formatCurrency(
          lastCalculatedResults.finalBalance
        )}\n`;
        body += `Sustainability: ${lastCalculatedResults.sustainability}\n\n`;
        body += `Calculated using Chimulkar Financial Services Calculators.\n\n`;

        window.location.href = `mailto:?subject=${subject}&body=${encodeURIComponent(
          body
        )}`;
      }

      // Function to generate WhatsApp message
      function sendWhatsAppPlan() {
        let message = `My SWP Calculation Plan:\n\n`;

        message += `Mode: ${isMonthlyMode ? "Monthly" : "Yearly"} SWP\n`;
        message += `Initial Investment: ${formatCurrency(
          lastCalculatedResults.initialInvestment
        )}\n`;
        message += `${
          isMonthlyMode ? "Monthly" : "Yearly"
        } Withdrawal: ${formatCurrency(
          lastCalculatedResults.withdrawalAmount
        )}\n`;
        message += `Expected Return Rate: ${
          document.getElementById("returnInput").value
        }%\n`;
        message += `Withdrawal Period: ${
          document.getElementById("timeInput").value
        } Years\n`;

        if (inflationEnabled) {
          message += `Expected Inflation: ${
            document.getElementById("inflationInput").value
          }%\n`;
        }

        message += `\n--- Results ---\n`;
        message += `Initial Investment: ${formatCurrency(
          lastCalculatedResults.initialInvestment
        )}\n`;
        message += `Total Withdrawn: ${formatCurrency(
          lastCalculatedResults.totalWithdrawn
        )}\n`;
        message += `Final Balance: ${formatCurrency(
          lastCalculatedResults.finalBalance
        )}\n`;
        message += `Sustainability: ${lastCalculatedResults.sustainability}\n\n`;
        message += `Calculated using Chimulkar Financial Services Calculator.\n\n`;

        window.open(
          `https://wa.me/?text=${encodeURIComponent(message)}`,
          "_blank"
        );
      }

      // Function to download calculator image
      function downloadCalculatorImage() {
        const calculatorElement = document.getElementById(
          "calculatorContainer"
        );
        html2canvas(calculatorElement, {
          scale: 2,
          useCORS: true,
          logging: false,
        })
          .then((canvas) => {
            const link = document.createElement("a");
            link.download = "swp_calculator_plan.png";
            link.href = canvas.toDataURL("image/png");
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
          })
          .catch((error) => {
            console.error("Error capturing calculator image:", error);
            alert("Failed to capture image. Please try again.");
          });
      }

      // Setup event listeners
      function setupEventListeners() {
        // Mode toggle
        document
          .getElementById("monthlyModeBtn")
          .addEventListener("click", () => toggleMode(true));
        document
          .getElementById("yearlyModeBtn")
          .addEventListener("click", () => toggleMode(false));

        // Inflation toggle
        document
          .getElementById("inflationToggle")
          .addEventListener("change", toggleInflation);

        // Action Buttons
        document
          .getElementById("emailPlanBtn")
          .addEventListener("click", sendEmailPlan);
        document
          .getElementById("whatsappBtn")
          .addEventListener("click", sendWhatsAppPlan);
        document
          .getElementById("downloadImageBtn")
          .addEventListener("click", downloadCalculatorImage);

        // Input and Slider sync
        const inputs = [
          {
            id: "investment",
            slider: "investmentSlider",
            input: "investmentInput",
          },
          {
            id: "withdrawal",
            slider: "withdrawalSlider",
            input: "withdrawalInput",
          },
          { id: "return", slider: "returnSlider", input: "returnInput" },
          { id: "time", slider: "timeSlider", input: "timeInput" },
          {
            id: "inflation",
            slider: "inflationSlider",
            input: "inflationInput",
          },
        ];

        inputs.forEach((item) => {
          const slider = document.getElementById(item.slider);
          const input = document.getElementById(item.input);

          if (item.id === "investment" || item.id === "withdrawal") {
            // Special handling for amount inputs with Indian commas
            input.addEventListener("input", function () {
              let parsedValue = parseIndianFormattedNumber(this.value);
              slider.value = parsedValue;
              this.value = formatNumberWithIndianCommas(parsedValue);
              calculateSWP();
            });

            slider.addEventListener("input", function () {
              input.value = formatNumberWithIndianCommas(
                parseFloat(this.value)
              );
              calculateSWP();
            });
          } else {
            // Standard handling for other number inputs
            input.addEventListener("input", function () {
              slider.value = this.value;
              calculateSWP();
            });

            slider.addEventListener("input", function () {
              input.value = this.value;
              calculateSWP();
            });
          }
        });
      }

      // Initialize everything on load
      window.addEventListener("load", function () {
        initChart();
        setupEventListeners();
        // Initial calculation
        calculateSWP();
      });
    </script>
  </body>
</html>
