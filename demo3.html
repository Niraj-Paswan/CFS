<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Inflation Calculator - CFS</title>
    <link
      rel="shortcut icon"
      href="../assets/favicon.png"
      type="image/x-icon"
    />
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Poppins", sans-serif;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }
      .custom-slider {
        -webkit-appearance: none;
        appearance: none;
        height: 6px;
        border-radius: 3px;
        background: #e5e7eb;
        outline: none;
        transition: all 0.3s ease;
      }
      .custom-slider::-webkit-slider-thumb {
        -webkit-appearance: none;
        appearance: none;
        width: 20px;
        height: 20px;
        border-radius: 50%;
        background: #fcaf1b;
        cursor: grab;
        border: none;
        box-shadow: 0 2px 6px rgba(252, 175, 27, 0.4);
        transition: all 0.2s ease;
      }
      .custom-slider::-webkit-slider-thumb:active {
        cursor: grabbing;
      }
      .custom-slider::-moz-range-thumb {
        width: 20px;
        height: 20px;
        border-radius: 50%;
        background: #fcaf1b;
        cursor: grab;
        border: none;
        box-shadow: 0 2px 6px rgba(252, 175, 27, 0.4);
        transition: all 0.2s ease;
      }
      .input-value-box {
        background-color: #f3f4f6;
        border-radius: 8px;
        padding: 8px 12px;
        font-weight: 600;
        color: #1f2937;
        display: flex;
        align-items: center;
        gap: 4px;
        transition: all 0.2s ease;
      }
      .input-value-box:focus-within {
        box-shadow: 0 0 0 2px rgba(22, 31, 72, 0.2);
      }
      .input-value-box input {
        background: none;
        border: none;
        outline: none;
        width: 100%;
        font-weight: 600;
        color: #1f2937;
        text-align: right;
        padding: 0;
      }
      .result-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 12px 0;
        border-bottom: 1px solid #f3f4f6;
      }
      .result-item:last-child {
        border-bottom: none;
      }
      .result-item .label {
        font-weight: 500;
        color: #4b5563;
      }
      .result-item .value {
        font-weight: 600;
        color: #1f2937;
      }
      .chart-legend-dot {
        width: 10px;
        height: 10px;
        border-radius: 50%;
        display: inline-block;
        margin-right: 8px;
      }
      .chart-tab {
        padding: 8px 16px;
        border-radius: 8px;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.2s ease;
        border: 1px solid #e5e7eb;
      }
      .chart-tab.active {
        background-color: #161f48;
        color: white;
        border-color: #161f48;
      }
      .chart-tab:not(.active):hover {
        background-color: #f3f4f6;
      }
      .progress-container {
        background-color: #f3f4f6;
        border-radius: 12px;
        padding: 4px;
        margin: 8px 0;
      }
      .progress-bar {
        height: 24px;
        border-radius: 8px;
        background: linear-gradient(90deg, #fcaf1b 0%, #161f48 100%);
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-weight: 600;
        font-size: 12px;
        transition: width 0.8s ease;
      }
      .mode-toggle {
        display: inline-flex;
        background-color: #f3f4f6;
        border-radius: 8px;
        padding: 4px;
        gap: 0;
      }
      .mode-toggle button {
        padding: 8px 20px;
        border-radius: 6px;
        font-weight: 500;
        font-size: 16px;
        transition: all 0.2s ease;
        border: none;
        cursor: pointer;
        background: transparent;
        color: #6b7280;
      }
      .mode-toggle button.active {
        background-color: white;
        color: #1f2937;
        box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
      }
    </style>
  </head>
  <body
    class="bg-gray-100 flex flex-col items-center justify-center min-h-screen"
  >
    <section
      class="max-w-6xl w-full flex justify-center items-center text-center flex-col p-2 mt-16"
    >
      <div
        class="max-w-6xl w-full flex justify-center items-center text-center flex-col"
      >
        <div class="text-center mb-8 mt-8">
          <h1 class="text-2xl lg:text-4xl font-semibold text-black mb-3">
            Inflation Impact Cost
            <span class="text-[#fcaf1b]">Calculator</span>
          </h1>
          <p class="text-gray-500 text-base lg:text-lg">
            See how inflation affects your money over time. Save or share your
            results easily.
          </p>
        </div>

        <div
          id="calculatorContainer"
          class="max-w-6xl w-full bg-white p-0 lg:p-4 rounded-3xl border border-gray-300 overflow-hidden"
        >
          <!-- Mode Toggle -->
          <div
            class="flex justify-center p-2 text-lg mb-6 border-b border-gray-100 w-full"
          >
            <div class="mode-toggle text-lg">
              <button id="forwardModeBtn" class="active text-lg">
                Forward Mode
              </button>
              <button id="reverseModeBtn" class="text-lg">Reverse Mode</button>
            </div>
          </div>
          <!-- FORWARD MODE -->
          <div
            id="forwardModeSection"
            class="grid lg:grid-cols-2 gap-6 sm:gap-8 p-4 sm:p-8"
          >
            <!-- Left Side - Input Controls -->
            <div class="space-y-6 sm:space-y-8">
              <!-- Current Cost -->
              <div>
                <div class="flex items-center justify-between mb-3">
                  <label class="text-base sm:text-lg font-medium text-gray-700"
                    >Current Cost</label
                  >
                  <div class="input-value-box w-32 sm:w-40">
                    <span class="text-gray-500">₹</span>
                    <input
                      type="text"
                      id="currentCostInput"
                      value="1,00,000"
                      min="1000"
                      max="10000000"
                      step="1000"
                    />
                  </div>
                </div>
                <input
                  type="range"
                  id="currentCostSlider"
                  min="1000"
                  max="10000000"
                  value="100000"
                  step="1000"
                  class="custom-slider w-full mt-4"
                />
                <div class="flex justify-between text-xs text-gray-500 mt-2">
                  <span>₹1K</span>
                  <span>₹1Cr</span>
                </div>
              </div>

              <!-- Time Period -->
              <div>
                <div class="flex items-center justify-between mb-3">
                  <label class="text-base sm:text-lg font-medium text-gray-700"
                    >Time Period</label
                  >
                  <div class="input-value-box w-28 sm:w-32">
                    <input
                      type="number"
                      id="timePeriodInput"
                      value="10"
                      min="1"
                      max="50"
                    />
                    <span class="text-gray-500">Y</span>
                  </div>
                </div>
                <input
                  type="range"
                  id="timePeriodSlider"
                  min="1"
                  max="50"
                  value="10"
                  class="custom-slider w-full mt-4"
                />
                <div class="flex justify-between text-xs text-gray-500 mt-2">
                  <span>1Y</span>
                  <span>50Y</span>
                </div>
              </div>

              <!-- Expected Rate of Inflation -->
              <div>
                <div class="flex items-center justify-between mb-3">
                  <label
                    class="text-base text-start sm:text-lg font-medium text-gray-700"
                    >Expected Rate of Inflation (p.a)</label
                  >
                  <div class="input-value-box w-28 sm:w-32">
                    <input
                      type="number"
                      id="inflationRateInput"
                      value="6"
                      min="0"
                      max="20"
                      step="0.1"
                    />
                    <span class="text-gray-500">%</span>
                  </div>
                </div>
                <input
                  type="range"
                  id="inflationRateSlider"
                  min="0"
                  max="20"
                  value="6"
                  step="0.1"
                  class="custom-slider w-full mt-4"
                />
                <div class="flex justify-between text-xs text-gray-500 mt-2">
                  <span>0%</span>
                  <span>20%</span>
                </div>
              </div>

              <!-- Inflation Impact Visualization -->
              <div class="bg-gray-50 rounded-xl p-4 sm:p-6">
                <h3
                  class="text-base sm:text-lg font-semibold text-gray-800 mb-4"
                >
                  Inflation Impact Cost
                </h3>
                <div class="space-y-3">
                  <div class="flex justify-between text-sm">
                    <span class="text-gray-600">Current Cost</span>
                    <span class="font-semibold" id="progressCurrentValue"
                      >₹1.00 L</span
                    >
                  </div>
                  <div class="progress-container rounded-full">
                    <div
                      class="progress-bar py-4 rounded-full"
                      id="inflationProgressBar"
                      style="width: 64%"
                    >
                      +79% Impact
                    </div>
                  </div>
                  <div class="flex justify-between text-sm">
                    <span class="text-gray-600">Future Cost</span>
                    <span
                      class="font-semibold text-red-600"
                      id="progressFutureValue"
                      >₹1.79 L</span
                    >
                  </div>
                </div>
              </div>
              <h1
                id="openDisclaimer"
                class="text-sm text-blue-600 hover:underline hover:cursor-pointer text-start"
              >
                View Disclaimer
              </h1>
            </div>

            <!-- Right Side - Charts and Results -->
            <div class="space-y-4 sm:space-y-6">
              <!-- Chart Type Selector -->
              <div class="flex flex-wrap gap-2 justify-center">
                <button
                  class="chart-tab active rounded-full"
                  data-chart="timeline"
                  id="timelineTab"
                >
                  Timeline
                </button>
                <button
                  class="chart-tab rounded-full"
                  data-chart="comparison"
                  id="comparisonTab"
                >
                  Comparison
                </button>
                <button
                  class="chart-tab hidden"
                  data-chart="breakdown"
                  id="breakdownTab"
                >
                  Breakdown
                </button>
              </div>

              <!-- Chart Container -->
              <div
                class="bg-gray-50 rounded-xl p-2 sm:p-4 relative h-72 w-full"
              >
                <canvas id="mainChart"></canvas>
              </div>

              <!-- Chart Legend -->
              <div
                id="chartLegend"
                class="flex flex-wrap justify-center space-x-4 sm:space-x-6 text-xs sm:text-sm text-gray-600"
              >
                <div>
                  <span class="chart-legend-dot bg-gray-400"></span>
                  <span>Current Cost</span>
                </div>
                <div>
                  <span
                    class="chart-legend-dot"
                    style="background-color: #161f48"
                  ></span>
                  <span>Future Cost</span>
                </div>
                <div>
                  <span
                    class="chart-legend-dot"
                    style="background-color: #fcaf1b"
                  ></span>
                  <span>Inflation Impact Cost</span>
                </div>
              </div>

              <!-- Results -->
              <div
                class="bg-white border border-gray-200 rounded-xl p-4 sm:p-6"
              >
                <h3
                  class="text-base sm:text-lg font-semibold text-gray-800 mb-4"
                >
                  Calculation Results
                </h3>
                <div class="space-y-2">
                  <div class="result-item">
                    <span class="label">Current Cost</span>
                    <span id="displayCurrentCost" class="value">₹1.00 L</span>
                  </div>
                  <div class="result-item">
                    <span class="label">Time Period</span>
                    <span id="displayTimePeriod" class="value">10 Years</span>
                  </div>
                  <div class="result-item">
                    <span class="label">Inflation Rate</span>
                    <span id="displayInflationRate" class="value">6.0%</span>
                  </div>
                  <div class="result-item">
                    <span class="label">Future Cost</span>
                    <span
                      id="futureCost"
                      class="value text-base sm:text-lg font-bold"
                      style="color: #161f48"
                      >₹1.79 L</span
                    >
                  </div>
                  <div class="result-item">
                    <span class="label">Total Inflation Impact Cost</span>
                    <span
                      id="inflationImpact"
                      class="value text-base sm:text-lg font-bold"
                      style="color: #fcaf1b"
                      >₹79,085</span
                    >
                  </div>
                  <div class="result-item">
                    <span class="label">Annual Average Increase</span>
                    <span
                      id="annualIncrease"
                      class="value font-semibold text-red-600"
                      >₹7,909</span
                    >
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- REVERSE MODE -->
          <div
            id="reverseModeSection"
            class="hidden grid lg:grid-cols-2 gap-6 sm:gap-8 p-4 sm:p-8"
          >
            <!-- Left Side - Input Controls -->
            <div class="space-y-6 sm:space-y-8">
              <!-- Future Value -->
              <div>
                <div class="flex items-center justify-between mb-3">
                  <label class="text-base sm:text-lg font-medium text-gray-700"
                    >Future Value</label
                  >
                  <div class="input-value-box w-32 sm:w-40">
                    <span class="text-gray-500">₹</span>
                    <input
                      type="text"
                      id="futureValueInput"
                      value="1,79,085"
                      min="1000"
                      max="10000000"
                      step="1000"
                    />
                  </div>
                </div>
                <input
                  type="range"
                  id="futureValueSlider"
                  min="1000"
                  max="10000000"
                  value="179085"
                  step="1000"
                  class="custom-slider w-full mt-4"
                />
                <div class="flex justify-between text-xs text-gray-500 mt-2">
                  <span>₹1K</span>
                  <span>₹1Cr</span>
                </div>
              </div>

              <!-- Time Period (Reverse) -->
              <div>
                <div class="flex items-center justify-between mb-3">
                  <label class="text-base sm:text-lg font-medium text-gray-700"
                    >Time Period</label
                  >
                  <div class="input-value-box w-28 sm:w-32">
                    <input
                      type="number"
                      id="reverseTimePeriodInput"
                      value="10"
                      min="1"
                      max="50"
                    />
                    <span class="text-gray-500">Y</span>
                  </div>
                </div>
                <input
                  type="range"
                  id="reverseTimePeriodSlider"
                  min="1"
                  max="50"
                  value="10"
                  class="custom-slider w-full mt-4"
                />
                <div class="flex justify-between text-xs text-gray-500 mt-2">
                  <span>1Y</span>
                  <span>50Y</span>
                </div>
              </div>

              <!-- Expected Rate of Inflation (Reverse) -->
              <div>
                <div class="flex items-center justify-between mb-3">
                  <label
                    class="text-base text-start sm:text-lg font-medium text-gray-700"
                    >Expected Rate of Inflation (p.a)</label
                  >
                  <div class="input-value-box w-28 sm:w-32">
                    <input
                      type="number"
                      id="reverseInflationRateInput"
                      value="6"
                      min="0"
                      max="20"
                      step="0.1"
                    />
                    <span class="text-gray-500">%</span>
                  </div>
                </div>
                <input
                  type="range"
                  id="reverseInflationRateSlider"
                  min="0"
                  max="20"
                  value="6"
                  step="0.1"
                  class="custom-slider w-full mt-4"
                />
                <div class="flex justify-between text-xs text-gray-500 mt-2">
                  <span>0%</span>
                  <span>20%</span>
                </div>
              </div>

              <!-- Present Value Visualization -->
              <div class="bg-gray-50 rounded-xl p-4 sm:p-6">
                <h3
                  class="text-base sm:text-lg font-semibold text-gray-800 mb-4"
                >
                  Present Value Calculation
                </h3>
                <div class="space-y-3">
                  <div class="flex justify-between text-sm">
                    <span class="text-gray-600">Future Value</span>
                    <span class="font-semibold" id="reverseFutureValueDisplay"
                      >₹1.79 L</span
                    >
                  </div>
                  <div class="progress-container rounded-full">
                    <div
                      class="progress-bar py-4 rounded-full"
                      id="reverseProgressBar"
                      style="
                        width: 56%;
                        background: linear-gradient(
                          90deg,
                          #161f48 0%,
                          #fcaf1b 100%
                        );
                      "
                    >
                      -44% Value
                    </div>
                  </div>
                  <div class="flex justify-between text-sm">
                    <span class="text-gray-600">Present Value</span>
                    <span
                      class="font-semibold text-green-600"
                      id="reversePresentValueDisplay"
                      >₹1.00 L</span
                    >
                  </div>
                </div>
              </div>
              <h1
                id="openDisclaimer2"
                class="text-sm text-blue-600 hover:underline hover:cursor-pointer text-start"
              >
                View Disclaimer
              </h1>
            </div>

            <!-- Right Side - Charts and Results (Reverse) -->
            <div class="space-y-4 sm:space-y-6">
              <!-- Chart Container -->
              <div
                class="bg-gray-50 rounded-xl p-2 sm:p-4 relative h-72 w-full"
              >
                <canvas id="reverseChart"></canvas>
              </div>

              <!-- Chart Legend (Reverse) -->
              <div
                id="reverseChartLegend"
                class="flex flex-wrap justify-center space-x-4 sm:space-x-6 text-xs sm:text-sm text-gray-600"
              >
                <div>
                  <span
                    class="chart-legend-dot"
                    style="background-color: #161f48"
                  ></span>
                  <span>Present Value</span>
                </div>
                <div>
                  <span
                    class="chart-legend-dot"
                    style="background-color: #fcaf1b"
                  ></span>
                  <span>Value Loss</span>
                </div>
                <div>
                  <span class="chart-legend-dot bg-gray-400"></span>
                  <span>Future Value</span>
                </div>
              </div>

              <!-- Results (Reverse) -->
              <div
                class="bg-white border border-gray-200 rounded-xl p-4 sm:p-6"
              >
                <h3
                  class="text-base sm:text-lg font-semibold text-gray-800 mb-4"
                >
                  Calculation Results
                </h3>
                <div class="space-y-2">
                  <div class="result-item">
                    <span class="label">Future Value</span>
                    <span id="reverseFutureValue" class="value">₹1.79 L</span>
                  </div>
                  <div class="result-item">
                    <span class="label">Time Period</span>
                    <span id="reverseTimePeriod" class="value">10 Years</span>
                  </div>
                  <div class="result-item">
                    <span class="label">Inflation Rate</span>
                    <span id="reverseInflationRate" class="value">6.0%</span>
                  </div>
                  <div class="result-item">
                    <span class="label">Present Value</span>
                    <span
                      id="presentValue"
                      class="value text-base sm:text-lg font-bold"
                      style="color: #161f48"
                      >₹1.00 L</span
                    >
                  </div>
                  <div class="result-item">
                    <span class="label">Total Value Loss</span>
                    <span
                      id="valueLoss"
                      class="value text-base sm:text-lg font-bold"
                      style="color: #fcaf1b"
                      >₹79,085</span
                    >
                  </div>
                  <div class="result-item">
                    <span class="label">Loss Percentage</span>
                    <span
                      id="lossPercentage"
                      class="value font-semibold text-red-600"
                      >44%</span
                    >
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Modal -->
          <div
            id="disclaimerModal"
            class="fixed inset-0 p-4 bg-black bg-opacity-50 flex items-center justify-center hidden z-50 transition-opacity duration-300"
          >
            <div
              class="bg-white rounded-2xl shadow-lg max-w-4xl w-full p-8 relative transform transition-transform duration-300 scale-95"
              id="modalContent"
            >
              <button
                id="closeDisclaimer"
                class="absolute top-3 right-3 flex items-center justify-center w-8 h-8 bg-gray-200 rounded-full hover:bg-gray-300 transition-colors duration-200 group"
              >
                <svg
                  width="16"
                  height="16"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <line x1="18" y1="6" x2="6" y2="18" />
                  <line x1="6" y1="6" x2="18" y2="18" />
                </svg>
              </button>

              <h2 class="text-lg font-semibold mb-4 text-blue-700">
                Disclaimer
              </h2>
              <p class="text-sm text-gray-700 leading-relaxed text-start">
                These Calculators alone are not sufficient and shouldn't be used
                for development or implementation of an investment strategy. The
                examples do not purport to represent the performance of any
                security or investments. The recipient is advised to consult his
                or her advisor/tax consultant prior to arriving at any
                investment decision. Mutual Funds do not have a fixed rate of
                return and it is not possible to predict the rate of return.
                Past performance may or may not be sustained in future and is
                not a guarantee of any future returns. Mutual Fund Investments
                are subject to market risks, read all scheme related documents
                carefully.
              </p>
            </div>
          </div>

          <!-- Action Buttons -->
          <div class="p-4 sm:p-8 border-t border-gray-200">
            <div class="flex flex-wrap gap-3 sm:gap-4 justify-center">
              <button
                id="emailPlanBtn"
                class="flex items-center gap-2 text-base px-6 py-3 rounded-full text-black border border-gray-300 hover:bg-gray-100 transition-colors cursor-pointer"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  x="0px"
                  y="0px"
                  width="20"
                  height="20"
                  viewBox="0 0 48 48"
                >
                  <path
                    fill="#4caf50"
                    d="M45,16.2l-5,2.75l-5,4.75L35,40h7c1.657,0,3-1.343,3-3V16.2z"
                  ></path>
                  <path
                    fill="#1e88e5"
                    d="M3,16.2l3.614,1.71L13,23.7V40H6c-1.657,0-3-1.343-3-3V16.2z"
                  ></path>
                  <polygon
                    fill="#e53935"
                    points="35,11.2 24,19.45 13,11.2 12,17 13,23.7 24,31.95 35,23.7 36,17"
                  ></polygon>
                  <path
                    fill="#c62828"
                    d="M3,12.298V16.2l10,7.5V11.2L9.876,8.859C9.132,8.301,8.228,8,7.298,8h0C4.924,8,3,9.924,3,12.298z"
                  ></path>
                  <path
                    fill="#fbc02d"
                    d="M45,12.298V16.2l-10,7.5V11.2l3.124-2.341C38.868,8.301,39.772,8,40.702,8h0 C43.076,8,45,9.924,45,12.298z"
                  ></path>
                </svg>
                Email Plan
              </button>
              <button
                id="whatsappBtn"
                class="flex items-center gap-2 text-sm sm:text-base px-4 sm:px-6 py-2 sm:py-3 rounded-full text-black border border-gray-300 hover:bg-gray-100 transition-colors cursor-pointer"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  x="0px"
                  y="0px"
                  width="20"
                  height="20"
                  viewBox="0 0 48 48"
                >
                  <path
                    fill="#fff"
                    d="M4.9,43.3l2.7-9.8C5.9,30.6,5,27.3,5,24C5,13.5,13.5,5,24,5c5.1,0,9.8,2,13.4,5.6C41,14.2,43,18.9,43,24 c0,10.5-8.5,19-19,19c0,0,0,0,0,0h0c-3.2,0-6.3-0.8-9.1-2.3L4.9,43.3z"
                  ></path>
                  <path
                    fill="#40c351"
                    d="M35.2,12.8c-3-3-6.9-4.6-11.2-4.6C15.3,8.2,8.2,15.3,8.2,24c0,3,0.8,5.9,2.4,8.4L11,33l-1.6,5.8l6-1.6l0.6,0.3 c2.4,1.4,5.2,2.2,8,2.2h0c8.7,0,15.8-7.1,15.8-15.8C39.8,19.8,38.2,15.8,35.2,12.8z"
                  ></path>
                  <path
                    fill="#fff"
                    fill-rule="evenodd"
                    d="M19.3,16c-0.4-0.8-0.7-0.8-1.1-0.8c-0.3,0-0.6,0-0.9,0s-0.8,0.1-1.3,0.6c-0.4,0.5-1.7,1.6-1.7,4 s1.7,4.6,1.9,4.9s3.3,5.3,8.1,7.2c4,1.6,4.8,1.3,5.7,1.2c0.9-0.1,2.8-1.1,3.2-2.3c0.4-1.1,0.4-2.1,0.3-2.3c-0.1-0.2-0.4-0.3-0.9-0.6 s-2.8-1.4-3.2-1.5c-0.4-0.2-0.8-0.2-1.1,0.2c-0.3,0.5-1.2,1.5-1.5,1.9c-0.3,0.3-0.6,0.4-1,0.1c-0.5-0.2-2-0.7-3.8-2.4 c-1.4-1.3-2.4-2.8-2.6-3.3c-0.3-0.5,0-0.7,0.2-1c0.2-0.2,0.5-0.6,0.7-0.8c0.2-0.3,0.3-0.5,0.5-0.8c0.2-0.3,0.1-0.6,0-0.8  C20.6,19.3,19.7,17,19.3,16z"
                    clip-rule="evenodd"
                  ></path>
                </svg>
                WhatsApp
              </button>
              <button
                id="downloadImageBtn"
                class="flex items-center gap-2 text-sm px-6 py-3 rounded-full text-black border border-gray-300 hover:bg-gray-100 transition-colors cursor-pointer"
              >
                <svg
                  width="20"
                  height="20"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                  <polyline points="7,10 12,15 17,10" />
                  <line x1="12" y1="15" x2="12" y2="3" />
                </svg>
                Download Image
              </button>
              <a
                href="../index.html#consultation"
                class="inline-flex items-center bg-[#fcaf1b] text-black hover:text-white pl-5 pr-3 py-3 rounded-full text-base gap-3 group transition hover:bg-[#161f48] shadow-md"
              >
                Start Investing
                <span
                  class="bg-white text-black rounded-full p-1.5 flex items-center justify-center transition-transform group-hover:translate-x-1"
                >
                  <svg
                    width="16"
                    height="16"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  >
                    <line x1="5" y1="12" x2="19" y2="12" />
                    <polyline points="12,5 19,12 12,19" />
                  </svg>
                </span>
              </a>
            </div>
          </div>
        </div>
      </div>
    </section>

    <script>
      let chart, reverseChart;
      let currentChartType = "timeline";
      let isReverseMode = false;

      // Global variables for Forward Mode
      let lastCalculatedCurrentCost = 0;
      let lastCalculatedFutureCost = 0;
      let lastCalculatedInflationImpact = 0;
      let lastCalculatedTimePeriod = 0;
      let lastCalculatedInflationRate = 0;
      let yearlyData = [];

      // Global variables for Reverse Mode
      let lastCalculatedFutureValue = 0;
      let lastCalculatedPresentValue = 0;
      let lastCalculatedValueLoss = 0;

      // Mode switching
      document
        .getElementById("forwardModeBtn")
        .addEventListener("click", () => {
          isReverseMode = false;
          document
            .getElementById("forwardModeSection")
            .classList.remove("hidden");
          document.getElementById("reverseModeSection").classList.add("hidden");
          document.getElementById("forwardModeBtn").classList.add("active");
          document.getElementById("reverseModeBtn").classList.remove("active");
          calculateInflation();
        });

      document
        .getElementById("reverseModeBtn")
        .addEventListener("click", () => {
          isReverseMode = true;
          document
            .getElementById("reverseModeSection")
            .classList.remove("hidden");
          document.getElementById("forwardModeSection").classList.add("hidden");
          document.getElementById("reverseModeBtn").classList.add("active");
          document.getElementById("forwardModeBtn").classList.remove("active");
          calculateReverse();
        });

      // Disclaimer modals
      document
        .getElementById("openDisclaimer")
        .addEventListener("click", () => {
          document.getElementById("disclaimerModal").classList.remove("hidden");
        });

      document
        .getElementById("openDisclaimer2")
        .addEventListener("click", () => {
          document.getElementById("disclaimerModal").classList.remove("hidden");
        });

      document
        .getElementById("closeDisclaimer")
        .addEventListener("click", () => {
          document.getElementById("disclaimerModal").classList.add("hidden");
        });

      document
        .getElementById("disclaimerModal")
        .addEventListener("click", (e) => {
          if (e.target.id === "disclaimerModal") {
            document.getElementById("disclaimerModal").classList.add("hidden");
          }
        });

      // Sync inputs and sliders - FORWARD MODE
      ["currentCost", "timePeriod", "inflationRate"].forEach((field) => {
        const inputId = field + "Input";
        const sliderId = field + "Slider";
        const inputEl = document.getElementById(inputId);
        const sliderEl = document.getElementById(sliderId);

        if (inputEl && sliderEl) {
          inputEl.addEventListener("input", () => {
            let value = parseIndianFormattedNumber(inputEl.value);
            sliderEl.value = value;
            calculateInflation();
          });

          sliderEl.addEventListener("input", () => {
            const value = parseInt(sliderEl.value);
            if (field === "timePeriod" || field === "inflationRate") {
              inputEl.value = sliderEl.value;
            } else {
              inputEl.value = formatNumberWithIndianCommas(value);
            }
            calculateInflation();
          });
        }
      });

      // Sync inputs and sliders - REVERSE MODE
      ["futureValue", "reverseTimePeriod", "reverseInflationRate"].forEach(
        (field) => {
          const inputId = field + "Input";
          const sliderId = field + "Slider";
          const inputEl = document.getElementById(inputId);
          const sliderEl = document.getElementById(sliderId);

          if (inputEl && sliderEl) {
            inputEl.addEventListener("input", () => {
              let value = parseIndianFormattedNumber(inputEl.value);
              sliderEl.value = value;
              calculateReverse();
            });

            sliderEl.addEventListener("input", () => {
              const value = parseInt(sliderEl.value);
              if (
                field === "reverseTimePeriod" ||
                field === "reverseInflationRate"
              ) {
                inputEl.value = sliderEl.value;
              } else {
                inputEl.value = formatNumberWithIndianCommas(value);
              }
              calculateReverse();
            });
          }
        },
      );

      // Format functions
      function formatCurrency(amount) {
        if (amount >= 10000000) {
          return (
            "₹" + (amount / 10000000).toFixed(2).replace(".", ",") + " Crores"
          );
        } else if (amount >= 100000) {
          return (
            "₹" + (amount / 100000).toFixed(2).replace(".", ",") + " Lakhs"
          );
        } else {
          return "₹" + Math.round(amount).toLocaleString("en-IN");
        }
      }

      function formatNumberWithIndianCommas(num) {
        if (isNaN(num) || num === null) return "";
        return Number(num).toLocaleString("en-IN", {
          maximumFractionDigits: 0,
        });
      }

      function parseIndianFormattedNumber(str) {
        if (!str) return 0;
        return parseFloat(str.replace(/[^0-9.]/g, ""));
      }

      // FORWARD MODE CALCULATION
      function calculateInflation() {
        const currentCost = parseIndianFormattedNumber(
          document.getElementById("currentCostInput").value,
        );
        const timePeriod = parseInt(
          document.getElementById("timePeriodInput").value,
        );
        const inflationRate = parseFloat(
          document.getElementById("inflationRateInput").value,
        );

        yearlyData = [];
        for (let year = 0; year <= timePeriod; year++) {
          const value = currentCost * Math.pow(1 + inflationRate / 100, year);
          yearlyData.push({ year, value });
        }

        const futureCost =
          currentCost * Math.pow(1 + inflationRate / 100, timePeriod);
        const inflationImpact = futureCost - currentCost;
        const annualIncrease = inflationImpact / timePeriod;

        lastCalculatedCurrentCost = currentCost;
        lastCalculatedFutureCost = futureCost;
        lastCalculatedInflationImpact = inflationImpact;
        lastCalculatedTimePeriod = timePeriod;
        lastCalculatedInflationRate = inflationRate;

        updateForwardResults(
          currentCost,
          futureCost,
          inflationImpact,
          timePeriod,
          inflationRate,
          annualIncrease,
        );
        updateForwardChart();
        updateProgressBar(currentCost, futureCost, inflationImpact);
      }

      // REVERSE MODE CALCULATION
      function calculateReverse() {
        const futureValue = parseIndianFormattedNumber(
          document.getElementById("futureValueInput").value,
        );
        const timePeriod = parseInt(
          document.getElementById("reverseTimePeriodInput").value,
        );
        const inflationRate = parseFloat(
          document.getElementById("reverseInflationRateInput").value,
        );

        const presentValue =
          futureValue / Math.pow(1 + inflationRate / 100, timePeriod);
        const valueLoss = futureValue - presentValue;
        const lossPercentage = (valueLoss / futureValue) * 100;

        lastCalculatedFutureValue = futureValue;
        lastCalculatedPresentValue = presentValue;
        lastCalculatedValueLoss = valueLoss;
        lastCalculatedTimePeriod = timePeriod;
        lastCalculatedInflationRate = inflationRate;

        updateReverseResults(
          futureValue,
          presentValue,
          valueLoss,
          timePeriod,
          inflationRate,
          lossPercentage,
        );
        updateReverseChart(presentValue, futureValue, valueLoss);
        updateReverseProgressBar(
          futureValue,
          presentValue,
          valueLoss,
          lossPercentage,
        );
      }

      // Update Forward Mode Results
      function updateForwardResults(
        currentCost,
        futureCost,
        inflationImpact,
        timePeriod,
        inflationRate,
        annualIncrease,
      ) {
        document.getElementById("displayCurrentCost").textContent =
          formatCurrency(currentCost);
        document.getElementById("displayTimePeriod").textContent =
          timePeriod + " Years";
        document.getElementById("displayInflationRate").textContent =
          inflationRate.toFixed(1) + "%";
        document.getElementById("futureCost").textContent =
          formatCurrency(futureCost);
        document.getElementById("inflationImpact").textContent =
          formatCurrency(inflationImpact);
        document.getElementById("annualIncrease").textContent =
          formatCurrency(annualIncrease);
      }

      // Update Reverse Mode Results
      function updateReverseResults(
        futureValue,
        presentValue,
        valueLoss,
        timePeriod,
        inflationRate,
        lossPercentage,
      ) {
        document.getElementById("reverseFutureValue").textContent =
          formatCurrency(futureValue);
        document.getElementById("reverseTimePeriod").textContent =
          timePeriod + " Years";
        document.getElementById("reverseInflationRate").textContent =
          inflationRate.toFixed(1) + "%";
        document.getElementById("presentValue").textContent =
          formatCurrency(presentValue);
        document.getElementById("valueLoss").textContent =
          formatCurrency(valueLoss);
        document.getElementById("lossPercentage").textContent =
          lossPercentage.toFixed(1) + "%";
      }

      // Update progress bars
      function updateProgressBar(currentCost, futureCost, inflationImpact) {
        const impactPercentage = (inflationImpact / currentCost) * 100;
        const progressWidth = Math.min(impactPercentage, 100);
        document.getElementById("progressCurrentValue").textContent =
          formatCurrency(currentCost);
        document.getElementById("progressFutureValue").textContent =
          formatCurrency(futureCost);
        const progressBar = document.getElementById("inflationProgressBar");
        progressBar.style.width = progressWidth + "%";
        progressBar.textContent = `+${impactPercentage.toFixed(0)}% Impact`;
      }

      function updateReverseProgressBar(
        futureValue,
        presentValue,
        valueLoss,
        lossPercentage,
      ) {
        const progressWidth = Math.min(lossPercentage, 100);
        document.getElementById("reverseFutureValueDisplay").textContent =
          formatCurrency(futureValue);
        document.getElementById("reversePresentValueDisplay").textContent =
          formatCurrency(presentValue);
        const progressBar = document.getElementById("reverseProgressBar");
        progressBar.style.width = progressWidth + "%";
        progressBar.textContent = `-${lossPercentage.toFixed(0)}% Value`;
      }

      // Update Forward Chart
      function updateForwardChart() {
        let newType, newData, newOptions;
        switch (currentChartType) {
          case "timeline":
            newType = "line";
            newData = {
              labels: yearlyData.map((item) => `Year ${item.year}`),
              datasets: [
                {
                  label: "Value Over Time",
                  data: yearlyData.map((item) => item.value),
                  borderColor: "#161f48",
                  backgroundColor: "rgba(22, 31, 72, 0.1)",
                  borderWidth: 3,
                  fill: true,
                  tension: 0.4,
                  pointBackgroundColor: "#161f48",
                  pointBorderColor: "#ffffff",
                  pointBorderWidth: 2,
                  pointRadius: 6,
                },
              ],
            };
            break;
          case "comparison":
            newType = "bar";
            newData = {
              labels: ["Current Cost", "Future Cost", "Inflation Impact Cost"],
              datasets: [
                {
                  label: "Amount",
                  data: [
                    lastCalculatedCurrentCost,
                    lastCalculatedFutureCost,
                    lastCalculatedInflationImpact,
                  ],
                  backgroundColor: [
                    "rgba(156, 163, 175, 0.8)",
                    "rgba(22, 31, 72, 0.8)",
                    "rgba(252, 175, 27, 0.8)",
                  ],
                  borderColor: ["#9ca3af", "#161f48", "#fcaf1b"],
                  borderWidth: 2,
                  borderRadius: 8,
                },
              ],
            };
            break;
        }

        if (chart) chart.destroy();
        const ctx = document.getElementById("mainChart").getContext("2d");
        chart = new Chart(ctx, {
          type: newType,
          data: newData,
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: { legend: { display: false } },
            scales: {
              y: { beginAtZero: true, grid: { color: "rgba(0, 0, 0, 0.1)" } },
            },
          },
        });
      }

      // Update Reverse Chart
      function updateReverseChart(presentValue, futureValue, valueLoss) {
        if (reverseChart) reverseChart.destroy();
        const ctx = document.getElementById("reverseChart").getContext("2d");
        reverseChart = new Chart(ctx, {
          type: "bar",
          data: {
            labels: ["Present Value", "Value Loss", "Future Value"],
            datasets: [
              {
                label: "Amount",
                data: [presentValue, valueLoss, futureValue],
                backgroundColor: [
                  "rgba(22, 31, 72, 0.8)",
                  "rgba(252, 175, 27, 0.8)",
                  "rgba(156, 163, 175, 0.8)",
                ],
                borderColor: ["#161f48", "#fcaf1b", "#9ca3af"],
                borderWidth: 2,
                borderRadius: 8,
              },
            ],
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: { legend: { display: false } },
            scales: {
              y: { beginAtZero: true, grid: { color: "rgba(0, 0, 0, 0.1)" } },
            },
          },
        });
      }

      // Chart tab switching
      document.querySelectorAll(".chart-tab").forEach((tab) => {
        tab.addEventListener("click", () => {
          currentChartType = tab.dataset.chart;
          document
            .querySelectorAll(".chart-tab")
            .forEach((t) => t.classList.remove("active"));
          tab.classList.add("active");
          updateForwardChart();
        });
      });

      // Email function
      document.getElementById("emailPlanBtn").addEventListener("click", () => {
        const subject = encodeURIComponent("My Inflation Calculator Results");
        let body = `Hello,\n\nHere are my inflation calculation results:\n\n`;

        if (isReverseMode) {
          body += `Mode: Reverse Mode\n\n`;
          body += `Future Value: ${formatCurrency(lastCalculatedFutureValue)}\n`;
          body += `Time Period: ${lastCalculatedTimePeriod} Years\n`;
          body += `Expected Inflation Rate: ${lastCalculatedInflationRate.toFixed(1)}%\n\n`;
          body += `--- Results ---\n`;
          body += `Present Value: ${formatCurrency(lastCalculatedPresentValue)}\n`;
          body += `Total Value Loss: ${formatCurrency(lastCalculatedValueLoss)}\n`;
        } else {
          body += `Mode: Forward Mode\n\n`;
          body += `Current Cost: ${formatCurrency(lastCalculatedCurrentCost)}\n`;
          body += `Time Period: ${lastCalculatedTimePeriod} Years\n`;
          body += `Expected Inflation Rate: ${lastCalculatedInflationRate.toFixed(1)}%\n\n`;
          body += `--- Results ---\n`;
          body += `Future Cost: ${formatCurrency(lastCalculatedFutureCost)}\n`;
          body += `Total Inflation Impact Cost: ${formatCurrency(lastCalculatedInflationImpact)}\n`;
        }

        window.location.href = `mailto:?subject=${subject}&body=${encodeURIComponent(body)}`;
      });

      // WhatsApp function
      document.getElementById("whatsappBtn").addEventListener("click", () => {
        let message = `My Inflation Calculator Results:\n\n`;

        if (isReverseMode) {
          message += `Mode: Reverse Mode\n\n`;
          message += `Future Value: *${formatCurrency(lastCalculatedFutureValue)}*\n`;
          message += `Time Period: *${lastCalculatedTimePeriod} Years*\n`;
          message += `Inflation Rate: *${lastCalculatedInflationRate.toFixed(1)}%*\n\n`;
          message += `Present Value: *${formatCurrency(lastCalculatedPresentValue)}*\n`;
          message += `Value Loss: *${formatCurrency(lastCalculatedValueLoss)}*\n`;
        } else {
          message += `Mode: Forward Mode\n\n`;
          message += `Current Cost: *${formatCurrency(lastCalculatedCurrentCost)}*\n`;
          message += `Time Period: *${lastCalculatedTimePeriod} Years*\n`;
          message += `Inflation Rate: *${lastCalculatedInflationRate.toFixed(1)}%*\n\n`;
          message += `Future Cost: *${formatCurrency(lastCalculatedFutureCost)}*\n`;
          message += `Impact Cost: *${formatCurrency(lastCalculatedInflationImpact)}*\n`;
        }

        window.open(
          `https://wa.me/?text=${encodeURIComponent(message)}`,
          "_blank",
        );
      });

      // Download image function
      document
        .getElementById("downloadImageBtn")
        .addEventListener("click", () => {
          const container = document.getElementById("calculatorContainer");
          html2canvas(container, { backgroundColor: "#ffffff" }).then(
            (canvas) => {
              const link = document.createElement("a");
              link.href = canvas.toDataURL();
              link.download = "inflation-calculator.png";
              link.click();
            },
          );
        });

      // Initialize
      calculateInflation();
    </script>
  </body>
</html>
