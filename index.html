<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Interactive Chat FAQ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      @keyframes fadeInUp {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      @keyframes fadeOut {
        from {
          opacity: 1;
          transform: translateY(0);
        }
        to {
          opacity: 0;
          transform: translateY(-10px);
        }
      }

      @keyframes slideDown {
        from {
          opacity: 0;
          max-height: 0;
          transform: translateY(-10px);
        }
        to {
          opacity: 1;
          max-height: 200px;
          transform: translateY(0);
        }
      }

      @keyframes slideUp {
        from {
          opacity: 1;
          max-height: 200px;
          transform: translateY(0);
        }
        to {
          opacity: 0;
          max-height: 0;
          transform: translateY(-10px);
        }
      }

      @keyframes typing {
        0%,
        50% {
          opacity: 1;
        }
        51%,
        100% {
          opacity: 0;
        }
      }

      .fade-in-up {
        animation: fadeInUp 0.6s ease-out forwards;
      }

      .fade-out {
        animation: fadeOut 0.3s ease-out forwards;
      }

      .slide-down {
        animation: slideDown 0.4s ease-out forwards;
      }

      .slide-up {
        animation: slideUp 0.3s ease-out forwards;
      }

      .typing-indicator {
        animation: typing 1.5s infinite;
      }

      .chat-bubble {
        transition: all 0.3s ease;
      }

      .chat-bubble:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
      }

      .gradient-bg {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      }

      .question-active {
        background: linear-gradient(
          135deg,
          #3b82f6 0%,
          #1d4ed8 100%
        ) !important;
        box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3);
      }

      .question-answered {
        background: linear-gradient(
          135deg,
          #10b981 0%,
          #059669 100%
        ) !important;
        box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3);
      }

      .question-inactive {
        background: #6b7280 !important;
        cursor: default;
      }

      .question-inactive:hover {
        transform: none;
        box-shadow: none;
      }

      .collapse-btn {
        transition: all 0.3s ease;
        cursor: pointer;
      }

      .collapse-btn:hover {
        background-color: rgba(255, 255, 255, 0.2);
      }

      .collapse-btn.collapsed {
        transform: rotate(-90deg);
      }

      /* Custom scrollbar */
      .chat-container::-webkit-scrollbar {
        width: 6px;
      }

      .chat-container::-webkit-scrollbar-track {
        background: #f1f1f1;
        border-radius: 10px;
      }

      .chat-container::-webkit-scrollbar-thumb {
        background: #c1c1c1;
        border-radius: 10px;
      }

      .chat-container::-webkit-scrollbar-thumb:hover {
        background: #a8a8a8;
      }

      .faq-item {
        margin-bottom: 1rem;
      }

      .response-container {
        overflow: hidden;
        transition: all 0.3s ease;
      }
    </style>
  </head>
  <body class="bg-gray-50 min-h-screen py-12">
    <div class="max-w-4xl mx-auto px-4">
      <!-- Header -->
      <div class="text-center mb-12">
        <h1 class="text-4xl font-bold text-gray-800 mb-4">
          Frequently Asked Questions
        </h1>
        <p class="text-gray-600 text-lg">
          Click on any question to see our response. Click the arrow to collapse
          answered questions.
        </p>
      </div>

      <!-- Chat Container -->
      <div
        class="bg-white rounded-2xl shadow-xl p-6 max-h-[600px] overflow-y-auto chat-container"
        id="chatContainer"
      >
        <!-- FAQ Items will be inserted here -->
      </div>
    </div>

    <script>
      const faqData = [
        {
          question: "What services do you offer?",
          answer:
            "We offer a comprehensive range of digital services including web development, mobile app development, UI/UX design, and digital marketing solutions. Our team specializes in creating custom solutions tailored to your business needs.",
        },
        {
          question: "How long does a typical project take?",
          answer:
            "Project timelines vary depending on complexity and scope. A simple website typically takes 2-4 weeks, while more complex applications can take 2-6 months. We'll provide a detailed timeline during our initial consultation.",
        },
        {
          question: "Do you provide ongoing support?",
          answer:
            "We offer comprehensive maintenance and support packages. This includes regular updates, security monitoring, bug fixes, and technical support to ensure your project continues to perform optimally.",
        },
        {
          question: "What's your pricing structure?",
          answer:
            "Our pricing is project-based and depends on your specific requirements. We offer competitive rates and flexible payment options. Contact us for a free consultation and detailed quote tailored to your needs.",
        },
        {
          question: "Can you work with existing systems?",
          answer:
            "Yes, we have extensive experience integrating with existing systems and platforms. Whether you need to connect APIs, migrate data, or enhance current functionality, we can seamlessly work with your existing infrastructure.",
        },
        {
          question: "Do you offer revisions?",
          answer:
            "We include a reasonable number of revisions in all our projects. We work closely with you throughout the development process to ensure the final product meets your expectations and requirements.",
        },
      ];

      const chatContainer = document.getElementById("chatContainer");
      let currentActiveQuestion = null;
      let isProcessing = false;
      let answeredQuestions = new Set();

      function createFAQItem(question, index) {
        const faqDiv = document.createElement("div");
        faqDiv.className = "faq-item opacity-0";
        faqDiv.id = `faq-item-${index}`;
        faqDiv.innerHTML = `
                <!-- User Question -->
                <div class="flex items-start justify-end space-x-3 mb-6" id="question-${index}">
                    <div class="bg-blue-500 text-white rounded-2xl rounded-tr-sm px-4 py-3 max-w-xs lg:max-w-md chat-bubble cursor-pointer question-bubble flex items-center justify-between" 
                         onclick="handleQuestionClick(${index})" data-index="${index}">
                        <p class="text-sm lg:text-base pr-2">${question}</p>
                        <div class="collapse-btn hidden w-6 h-6 rounded-full flex items-center justify-center ml-2" 
                             id="collapse-btn-${index}" onclick="event.stopPropagation(); toggleCollapse(${index})">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                            </svg>
                        </div>
                    </div>
                    <div class="w-10 h-10 rounded-full bg-blue-500 flex items-center justify-center flex-shrink-0">
                        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                                  d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                        </svg>
                    </div>
                </div>
                <!-- Response container (initially empty) -->
                <div class="response-container" id="response-container-${index}"></div>
            `;
        return faqDiv;
      }

      function createBotMessage(answer, index) {
        const messageDiv = document.createElement("div");
        messageDiv.className = "flex items-start space-x-3 mb-6 opacity-0";
        messageDiv.id = `answer-${index}`;
        messageDiv.innerHTML = `
                <div class="w-10 h-10 rounded-full gradient-bg flex items-center justify-center flex-shrink-0">
                    <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                              d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path>
                    </svg>
                </div>
                <div class="bg-gray-100 rounded-2xl rounded-tl-sm px-4 py-3 max-w-xs lg:max-w-md chat-bubble">
                    <p class="text-gray-800 text-sm lg:text-base">${answer}</p>
                </div>
            `;
        return messageDiv;
      }

      function createTypingIndicator() {
        const typingDiv = document.createElement("div");
        typingDiv.className = "flex items-start space-x-3 mb-6";
        typingDiv.id = "typing-indicator";
        typingDiv.innerHTML = `
                <div class="w-10 h-10 rounded-full gradient-bg flex items-center justify-center flex-shrink-0">
                    <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                              d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path>
                    </svg>
                </div>
                <div class="bg-gray-100 rounded-2xl rounded-tl-sm px-4 py-3 max-w-xs">
                    <div class="flex space-x-1">
                        <div class="w-2 h-2 bg-gray-400 rounded-full typing-indicator"></div>
                        <div class="w-2 h-2 bg-gray-400 rounded-full typing-indicator" style="animation-delay: 0.2s;"></div>
                        <div class="w-2 h-2 bg-gray-400 rounded-full typing-indicator" style="animation-delay: 0.4s;"></div>
                    </div>
                </div>
            `;
        return typingDiv;
      }

      function animateMessage(element, delay = 0) {
        setTimeout(() => {
          element.classList.add("fade-in-up");
          element.style.opacity = "1";
        }, delay);
      }

      function scrollToElement(element) {
        element.scrollIntoView({ behavior: "smooth", block: "nearest" });
      }

      function updateQuestionStates(activeIndex) {
        // Update all question bubbles
        const questionBubbles = document.querySelectorAll(".question-bubble");
        questionBubbles.forEach((bubble, index) => {
          bubble.classList.remove(
            "question-active",
            "question-inactive",
            "question-answered"
          );
          if (index === activeIndex) {
            bubble.classList.add("question-active");
            bubble.style.cursor = "default";
          } else if (answeredQuestions.has(index)) {
            bubble.classList.add("question-answered");
            bubble.style.cursor = "pointer";
          } else {
            bubble.style.cursor = "pointer";
          }
        });
      }

      function showCollapseButton(index) {
        const collapseBtn = document.getElementById(`collapse-btn-${index}`);
        if (collapseBtn) {
          collapseBtn.classList.remove("hidden");
        }
      }

      function hideCurrentAnswer() {
        if (currentActiveQuestion !== null) {
          const currentResponseContainer = document.getElementById(
            `response-container-${currentActiveQuestion}`
          );
          if (
            currentResponseContainer &&
            currentResponseContainer.children.length > 0
          ) {
            const currentAnswer = currentResponseContainer.firstChild;
            currentAnswer.classList.add("fade-out");
            setTimeout(() => {
              currentResponseContainer.innerHTML = "";
            }, 300);
          }

          // Reset previous question styling but keep it as answered
          const prevQuestionBubble = document.querySelector(
            `[data-index="${currentActiveQuestion}"]`
          );
          if (prevQuestionBubble) {
            prevQuestionBubble.classList.remove(
              "question-active",
              "question-inactive"
            );
            if (answeredQuestions.has(currentActiveQuestion)) {
              prevQuestionBubble.classList.add("question-answered");
            }
            prevQuestionBubble.style.cursor = "pointer";
          }
        }
      }

      function toggleCollapse(index) {
        const responseContainer = document.getElementById(
          `response-container-${index}`
        );
        const collapseBtn = document.getElementById(`collapse-btn-${index}`);

        if (!responseContainer || !answeredQuestions.has(index)) return;

        if (responseContainer.style.display === "none") {
          // Show the response
          responseContainer.style.display = "block";
          responseContainer.classList.remove("slide-up");
          responseContainer.classList.add("slide-down");
          collapseBtn.classList.remove("collapsed");
        } else {
          // Hide the response
          responseContainer.classList.remove("slide-down");
          responseContainer.classList.add("slide-up");
          collapseBtn.classList.add("collapsed");
          setTimeout(() => {
            responseContainer.style.display = "none";
          }, 300);
        }
      }

      function handleQuestionClick(index) {
        if (isProcessing) return;

        // If clicking an answered question, just show its response
        if (answeredQuestions.has(index) && currentActiveQuestion !== index) {
          hideCurrentAnswer();

          const responseContainer = document.getElementById(
            `response-container-${index}`
          );
          if (responseContainer.innerHTML === "") {
            // Re-create the answer if it was collapsed
            const botMessage = createBotMessage(faqData[index].answer, index);
            responseContainer.appendChild(botMessage);
            animateMessage(botMessage);
          }

          responseContainer.style.display = "block";
          responseContainer.classList.remove("slide-up");
          responseContainer.classList.add("slide-down");

          const collapseBtn = document.getElementById(`collapse-btn-${index}`);
          if (collapseBtn) {
            collapseBtn.classList.remove("collapsed");
          }

          updateQuestionStates(index);
          currentActiveQuestion = index;
          scrollToElement(document.getElementById(`question-${index}`));
          return;
        }

        // If clicking the same question that's already active, do nothing
        if (currentActiveQuestion === index) return;

        isProcessing = true;
        const faq = faqData[index];
        const responseContainer = document.getElementById(
          `response-container-${index}`
        );

        // Hide current answer if exists
        hideCurrentAnswer();

        // Update question states
        updateQuestionStates(index);

        // Create and show typing indicator in the response container
        setTimeout(() => {
          const typingIndicator = createTypingIndicator();
          responseContainer.appendChild(typingIndicator);
          responseContainer.style.display = "block";

          // Scroll to the question
          const questionElement = document.getElementById(`question-${index}`);
          scrollToElement(questionElement);

          // Remove typing indicator and show answer after delay
          setTimeout(() => {
            responseContainer.innerHTML = "";

            const botMessage = createBotMessage(faq.answer, index);
            responseContainer.appendChild(botMessage);
            animateMessage(botMessage);

            // Mark as answered and show collapse button
            answeredQuestions.add(index);
            showCollapseButton(index);

            // Update question styling to answered state
            const questionBubble = document.querySelector(
              `[data-index="${index}"]`
            );
            questionBubble.classList.remove("question-active");
            questionBubble.classList.add("question-answered");

            // Scroll to show the answer
            scrollToElement(botMessage);

            currentActiveQuestion = index;
            isProcessing = false;
          }, 1500);
        }, 100);
      }

      function initializeFAQ() {
        faqData.forEach((faq, index) => {
          setTimeout(() => {
            const faqItem = createFAQItem(faq.question, index);
            chatContainer.appendChild(faqItem);
            animateMessage(faqItem);
          }, index * 300);
        });
      }

      // Initialize the FAQ when page loads
      document.addEventListener("DOMContentLoaded", initializeFAQ);
    </script>
  </body>
</html>
